!function(e){function n(e){delete installedChunks[e]}function t(e){var n=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.charset="utf-8",t.src=p.p+""+e+"."+b+".hot-update.js",n.appendChild(t)}function a(e){return e=e||1e4,new Promise(function(n,t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var a=new XMLHttpRequest,r=p.p+""+b+".hot-update.json";a.open("GET",r,!0),a.timeout=e,a.send(null)}catch(e){return t(e)}a.onreadystatechange=function(){if(4===a.readyState)if(0===a.status)t(new Error("Manifest request to "+r+" timed out."));else if(404===a.status)n();else if(200!==a.status&&304!==a.status)t(new Error("Manifest request to "+r+" failed."));else{try{var e=JSON.parse(a.responseText)}catch(e){return void t(e)}n(e)}}})}function r(e){var n=O[e];if(!n)return p;var t=function(t){return n.hot.active?(O[t]?O[t].parents.indexOf(e)<0&&O[t].parents.push(e):(C=[e],m=t),n.children.indexOf(t)<0&&n.children.push(t)):(console.warn("[HMR] unexpected require("+t+") from disposed module "+e),C=[]),p(t)};for(var a in p)Object.prototype.hasOwnProperty.call(p,a)&&"e"!==a&&Object.defineProperty(t,a,function(e){return{configurable:!0,enumerable:!0,get:function(){return p[e]},set:function(n){p[e]=n}}}(a));return t.e=function(e){function n(){A--,"prepare"===k&&(P[e]||u(e),0===A&&0===q&&c())}return"ready"===k&&i("prepare"),A++,p.e(e).then(n,function(e){throw n(),e})},t}function o(e){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:m!==e,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var a=0;a<e.length;a++)n._acceptedDependencies[e[a]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);t>=0&&n._disposeHandlers.splice(t,1)},check:l,apply:f,status:function(e){if(!e)return k;S.push(e)},addStatusHandler:function(e){S.push(e)},removeStatusHandler:function(e){var n=S.indexOf(e);n>=0&&S.splice(n,1)},data:x[e]};return m=void 0,n}function i(e){k=e;for(var n=0;n<S.length;n++)S[n].call(null,e)}function s(e){return+e+""===e?+e:e}function l(e){if("idle"!==k)throw new Error("check() is only allowed in idle status");return _=e,i("check"),a(y).then(function(e){if(!e)return i("idle"),null;T={},P={},j=e.c,w=e.h,i("prepare");var n=new Promise(function(e,n){v={resolve:e,reject:n}});g={};return u(0),"prepare"===k&&0===A&&0===q&&c(),n})}function d(e,n){if(j[e]&&T[e]){T[e]=!1;for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(g[t]=n[t]);0==--q&&0===A&&c()}}function u(e){j[e]?(T[e]=!0,q++,t(e)):P[e]=!0}function c(){i("ready");var e=v;if(v=null,e)if(_)Promise.resolve().then(function(){return f(_)}).then(function(n){e.resolve(n)},function(n){e.reject(n)});else{var n=[];for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&n.push(s(t));e.resolve(n)}}function f(t){function a(e,n){for(var t=0;t<n.length;t++){var a=n[t];e.indexOf(a)<0&&e.push(a)}}if("ready"!==k)throw new Error("apply() is only allowed in ready status");t=t||{};var r,o,l,d,u,c={},f=[],h={},m=function(){console.warn("[HMR] unexpected require("+_.moduleId+") to disposed module")};for(var v in g)if(Object.prototype.hasOwnProperty.call(g,v)){u=s(v);var _;_=g[v]?function(e){for(var n=[e],t={},r=n.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var o=r.pop(),i=o.id,s=o.chain;if((d=O[i])&&!d.hot._selfAccepted){if(d.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:i};if(d.hot._main)return{type:"unaccepted",chain:s,moduleId:i};for(var l=0;l<d.parents.length;l++){var u=d.parents[l],c=O[u];if(c){if(c.hot._declinedDependencies[i])return{type:"declined",chain:s.concat([u]),moduleId:i,parentId:u};n.indexOf(u)>=0||(c.hot._acceptedDependencies[i]?(t[u]||(t[u]=[]),a(t[u],[i])):(delete t[u],n.push(u),r.push({chain:s.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:n,outdatedDependencies:t}}(u):{type:"disposed",moduleId:v};var y=!1,E=!1,S=!1,q="";switch(_.chain&&(q="\nUpdate propagation: "+_.chain.join(" -> ")),_.type){case"self-declined":t.onDeclined&&t.onDeclined(_),t.ignoreDeclined||(y=new Error("Aborted because of self decline: "+_.moduleId+q));break;case"declined":t.onDeclined&&t.onDeclined(_),t.ignoreDeclined||(y=new Error("Aborted because of declined dependency: "+_.moduleId+" in "+_.parentId+q));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(_),t.ignoreUnaccepted||(y=new Error("Aborted because "+u+" is not accepted"+q));break;case"accepted":t.onAccepted&&t.onAccepted(_),E=!0;break;case"disposed":t.onDisposed&&t.onDisposed(_),S=!0;break;default:throw new Error("Unexception type "+_.type)}if(y)return i("abort"),Promise.reject(y);if(E){h[u]=g[u],a(f,_.outdatedModules);for(u in _.outdatedDependencies)Object.prototype.hasOwnProperty.call(_.outdatedDependencies,u)&&(c[u]||(c[u]=[]),a(c[u],_.outdatedDependencies[u]))}S&&(a(f,[_.moduleId]),h[u]=m)}var A=[];for(o=0;o<f.length;o++)u=f[o],O[u]&&O[u].hot._selfAccepted&&A.push({module:u,errorHandler:O[u].hot._selfAccepted});i("dispose"),Object.keys(j).forEach(function(e){!1===j[e]&&n(e)});for(var P,T=f.slice();T.length>0;)if(u=T.pop(),d=O[u]){var N={},R=d.hot._disposeHandlers;for(l=0;l<R.length;l++)(r=R[l])(N);for(x[u]=N,d.hot.active=!1,delete O[u],delete c[u],l=0;l<d.children.length;l++){var M=O[d.children[l]];M&&((P=M.parents.indexOf(u))>=0&&M.parents.splice(P,1))}}var B,D;for(u in c)if(Object.prototype.hasOwnProperty.call(c,u)&&(d=O[u]))for(D=c[u],l=0;l<D.length;l++)B=D[l],(P=d.children.indexOf(B))>=0&&d.children.splice(P,1);i("apply"),b=w;for(u in h)Object.prototype.hasOwnProperty.call(h,u)&&(e[u]=h[u]);var L=null;for(u in c)if(Object.prototype.hasOwnProperty.call(c,u)&&(d=O[u])){D=c[u];var I=[];for(o=0;o<D.length;o++)if(B=D[o],r=d.hot._acceptedDependencies[B]){if(I.indexOf(r)>=0)continue;I.push(r)}for(o=0;o<I.length;o++){r=I[o];try{r(D)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:D[o],error:e}),t.ignoreErrored||L||(L=e)}}}for(o=0;o<A.length;o++){var F=A[o];u=F.module,C=[u];try{p(u)}catch(e){if("function"==typeof F.errorHandler)try{F.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:n,orginalError:e}),t.ignoreErrored||L||(L=n),L||(L=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:e}),t.ignoreErrored||L||(L=e)}}return L?(i("fail"),Promise.reject(L)):(i("idle"),new Promise(function(e){e(f)}))}function p(n){if(O[n])return O[n].exports;var t=O[n]={i:n,l:!1,exports:{},hot:o(n),parents:(E=C,C=[],E),children:[]};return e[n].call(t.exports,t,t.exports,r(n)),t.l=!0,t.exports}var h=this.webpackHotUpdate;this.webpackHotUpdate=function(e,n){d(e,n),h&&h(e,n)};var m,v,g,w,_=!0,b="7d4acaaa7c35cc9cc917",y=1e4,x={},C=[],E=[],S=[],k="idle",q=0,A=0,P={},T={},j={},O={};p.m=e,p.c=O,p.d=function(e,n,t){p.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},p.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return p.d(n,"a",n),n},p.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},p.p="",p.h=function(){return b},r(2)(p.s=2)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = {\n    Signal,\n    Sweep,\n    Envelope,\n    conformSignal: conformSignal,\n}\n\n\n\nfunction Signal(type, target, delay, freq, gain, Q) {\n    this.type = type || 'sine'\n    this.target = target || ''\n    this.delay = delay || 0\n    this.freq = freq || null\n    this.gain = gain || null\n    this.Q = Q || null\n}\n\nfunction Sweep(t, f, p, q, k, j, jt) {\n    this.t = test(t, +1)    // input multiplier\n    this.f = test(f, +0)    // input adder\n    this.p = test(p, +1)    // sweep multiplier\n    this.q = test(q, +1)    // sweep time constant\n    this.k = test(k, +0)    // volume key tracking - input is scaled by this amount\n    this.j = j || null      // array of jump multipliers\n    this.jt = jt || null    // array of jump times\n}\n\nfunction Envelope(v, a, h, d, s, r, k) {\n    this.v = test(v, +1)     // peak\n    this.a = test(a, +0.01)     // attack ramp time\n    this.h = test(h, +0.01)     // hold time\n    this.d = test(d, +0.2)   // decay time constant\n    this.s = test(s, +0.5)   // sustain level\n    this.r = test(r, +0.2)   // release time constant\n    this.k = test(k, +0)     // volume key tracking - input is scaled by this amount\n}\n\n\nfunction test(val, def) {\n    return (val === undefined) ? def : val\n}\n\n\n\n\n/*\n * \n *  Helper - conform any random input values into a valid program\n * \n*/\n\nfunction conformSignal(raw) {\n    var sig = new Signal()\n    if (raw.type) sig.type = '' + raw.type\n    if (raw.target) sig.target = '' + raw.target\n    if (raw.delay) sig.delay = +raw.delay\n    sig.freq = conformParam(raw.freq, emptyFreq)\n    sig.gain = conformParam(raw.gain, emptyGain)\n    sig.Q = conformParam(raw.Q, null)\n    return sig\n}\n\nvar emptyFreq = new Sweep()\nvar emptyGain = new Envelope()\n\nfunction conformParam(raw, nullCase) {\n    if (typeof raw === 'number') return { t: 0, f: +raw, p: 1 }\n    if (!raw) return nullCase\n    if (Object.keys(raw).length === 0) return nullCase\n    if (raw.t || raw.f || raw.j || raw.p) {\n        // raw is a sweep\n        var sw = new Sweep(raw.t, raw.f, raw.p, raw.q, raw.k)\n        if (raw.j && raw.jt) {\n            sw.j = (typeof raw.j === 'string') ? strToArr(raw.j) : raw.j\n            sw.jt = (typeof raw.jt === 'string') ? strToArr(raw.jt) : raw.jt\n        }\n        return sw\n    } else {\n        // raw is an envelope\n        return new Envelope(raw.v, raw.a, raw.h, raw.d, raw.s, raw.r, raw.k)\n    }\n}\n\n\nfunction strToArr(s) {\n    return s.split(',').map(parseFloat)\n}\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../src/progDefs.js\n// module id = 0\n// module chunks = 0\n\n//# sourceURL=webpack:///../src/progDefs.js?")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar NotePlayer = __webpack_require__(10)\nvar defs = __webpack_require__(0)\n\nmodule.exports = SoundGen\n\n\n\n/*\n *\n *  \n *                  SoundGen\n *  \n * \n*/\n\nfunction SoundGen(audioContext, destination) {\n    // program definitions\n    this.Signal = defs.Signal\n    this.Sweep = defs.Sweep\n    this.Envelope = defs.Envelope\n\n    // set up output chain\n    var AudioContext = window.AudioContext || window.webkitAudioContext\n    var ctx = audioContext || new AudioContext()\n    var output = ctx.createGain()\n    var masterVol = ctx.createGain()\n    output.connect(masterVol)\n    masterVol.connect(ctx.destination)\n\n    // public properties\n    this.monitor = output\n    this.masterGain = masterVol.gain\n\n\n    // note player lib\n    var player = new NotePlayer(ctx, output)\n\n\n\n    this.play = function (program, freq, vel, time, releaseTime) {\n        return player.play(program, freq, vel, time, releaseTime)\n    }\n\n    this.bend = function (noteID, freq, timeConst, time) {\n        return player.bend(noteID, freq, timeConst, time)\n    }\n\n    this.release = function (noteID, time) {\n        player.release(noteID, time)\n    }\n\n    this.releaseAll = function (time) {\n        player.releaseAll(time)\n    }\n\n    this.setMaxVoices = function (n) {\n        player.maxVoices = n\n    }\n\n    this.now = function () {\n        return ctx.currentTime\n    }\n\n    this.dispose = function () {\n        player.releaseAll()\n    }\n\n\n}\n\n\n\n    /*\n        0: sine wave\n            out = chvol\n            fp = freqIn * 1 + 0\n            vp = 0.4 * (inputV / 128)^2\n        1: triangle\n            out = o[0].frequency\n            fp = fp[0] * 1 + 0\n            vp = 3 * fp[0]\n\n            fp[i] = fp[pn.g - 1] * pn.t + pn.f;\n            vp[i] =  fp[pn.g - 1] * pn.v;\n            \n    */\n\n\n\n    /*\n    \n    \n    // ( time, channel, note, vel, program.p)\n    play note work:\n        per signal:\n            set out = chvol or [gain, frequency, playbackRate] param\n            set sc = velocity or frequency value?\n            set fp[signal] = freq value?\n            case oscillator:\n                createOscillator, freq = fp[signal]\n                set wave type / periodic wave\n                pitch bend freq to freq * P, timeconstant = Q\n                connect chmod[ch] to detune\n                set oscillator detune to bend[ch]\n            case noise:\n                createBufferSource, buffer = this.noiseBuf[wave name]\n                set loop, playbackRate\n            createGain -> g[signal] \n            store release\n            connect oscillator -> gain -> out (chvol/frequency/playbackRate)\n            store vp = prog.v * sc (vel or freq value?)\n            if K: vp[i] *= Math.pow(2, (n - 60) / 12 * K)\n            if A: ramp gain param -> A, else set gain = vp[i]\n            gain param target = S * vp[i], time=t + a + h, timeconstant = D\n            start oscillator[i]\n        if (drums) stop oscillator after delay D * 3.5\n\n\n    release note (t)\n        if not drums:\n            count down k\n                gain node - cancel schedules (t)\n                update gain envelope schedule - continue to A, set target 0 timeConst=R[k]\n        table.e = t + table.r[0] * 3.5\n        table.f = 1\n\n\n    interval 60\n        every 3 intervals:\n            prune all notes with E < currentTime\n        if playing:\n            midi stuff....\n        \n        \n\n    pruneNote (nt):\n        for oscillator k:\n            if (freq) disconnect chmod[ch] from oscillator detune\n            oscillator.disconnect\n            cancel scheduled values on frequency / playbackRate\n            osc.stop(0)\n        for gain k\n            gain.disconnect()\n            gain cancel scheduled\n    }\n\n*/\n\n\n\n\n\n\n\n/*\n\n\nprogram values\n    AHDSR - envelope: A time, H time, D timeConst, S level, R timeConst\n    GW      target (output or program) and waveform\n    TF      freq = input * T + F\n    V       Volume (gain param val)\n    K       scale V up or down by input midi note (no change at 60)\n    PQ      Pitch bend to freq * P, timeConstant Q\n\n\nnotetab entries {\n    t: t - startTime\n    t2: t + prog.a\n    e: 99999                end time\n    f: 0                    finished / released\n    ch: channel\n    n: note (midi value)\n    o: oscillator array\n    g: gain array\n    v: vp[] - volume points\n    r: r[] - release values\n}\n\n\ndefault program\n    a: 0        \\\n    h: 0.01      |\n    d: 0.01       >  AHDSR envelope\n    s: 0         |\n    r: 0.05     / \n    g: 0        target (0=dest, 1..=FM to oscillator)\n    w: sine     oscillator type\n    f: 0        fixed freq \\\n    t: 1        tune value  > freq = noteFreq * T + F \n    v: 0.5      velocity / volume\n    p: 1        pitch bend - freq bends to (freq * P) during release\n    k: 0        Volume key tracking. Volume will be increased according to pitch if plus, decreased if minus.\n    q: 1        ?????\n\n\n\nnote playing\n    noteOn(channel, midiNote, velocity, time) =>\n        _note( time, channel, note, vel, program.p)\n\n        \n\nsignal flow\n    oscillators\n    => this.chvol[ch]\n    => this.chpan[ch]           [skipped on safari]\n    => this.out\n    => this.conv/this.rev\n    => this.comp\n    => this.dest\n\n\n\npublic props\n    masterVol       { type: Number, value: 0.5, observer: "setMasterVol" }\n    reverbLev       { type: Number, value: 0.3, observer: "setReverbLev" }\n    quality         { type: Number, value: 1, observer: "setQuality" }\n    debug           { type: Number, value: 0 }\n    src             { type: String, value: null, observer: "loadMIDIUrl" }\n    loop            { type: Number, value: 0 }\n    internalcontext { type: Number, value: 1 }\n    tsmode          { type: Number, value: 0 }\n    voices          { type: Number, value: 64 }\n    useReverb       { type: Number, value: 1 }\n\n\nprivate props\n    pg        []\n    vol       []\n    bend      []\n    ex        []\n    rpnidx    []\n    brange    []\n    sustain   []\n    notetab   []\n    rhythm    []\n    maxTick     0\n    playTick    0\n    playing     0\n    releaseRatio 3.5\n    preroll     0.2\n    relcnt      0\n\n\n\n\nAPIs\n    ready             ()\n    setMasterVol      (v)\n    setReverbLev      (v)\n    setLoop           (f)\n    setVoices         (v)\n    getPlayStatus     ()\n    locateMIDI        (tick)\n    getTimbreName     (m, n)\n    loadMIDIUrl       (url)\n    reset             ()\n    stopMIDI          ()\n    playMIDI          ()\n    loadMIDI          (data)\n    setQuality        (q)\n    setTimbre         (m, n, p)\n    _pruneNote        (nt)\n    _limitVoices      (ch, n)\n    _note             (t, ch, n, v, p)\n    _setParamTarget   (p, v, t, d)\n    _releaseNote      (nt, t)\n    setModulation     (ch, v, t)\n    setChVol          (ch, v, t)\n    setPan            (ch, v, t)\n    setExpression     (ch, v, t)\n    setSustain        (ch, v, t)\n    allSoundOff       (ch)\n    resetAllControllers  (ch)\n    setBendRange      (ch, v)\n    setProgram        (ch, v)\n    setBend           (ch, v, t)\n    noteOn            (ch, n, v, t)\n    noteOff           (ch, n, t)\n    _tsConv           (t)\n    setTsMode         (tsmode)\n    send              (msg, t)\n    _createWave       (w)\n    getAudioContext   ()\n    setAudioContext   (actx, dest)\n\n\n\n*/\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../src/index.js\n// module id = 1\n// module chunks = 0\n\n//# sourceURL=webpack:///../src/index.js?')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar Viz = __webpack_require__(3)\nvar Gui = __webpack_require__(4)\nvar Instruments = __webpack_require__(7)\nvar converter = __webpack_require__(8)\nvar Presets = __webpack_require__(9)\n\n\n\n/*\n *      Persistent state\n*/\n\nvar AudioContext = window.AudioContext || window.webkitAudioContext\nvar ctx = new AudioContext()\nvar gen, SoundGen\n\nvar viz = new Viz(ctx,\n    document.querySelector('#waveform'),\n    document.querySelector('#eq'),\n    document.querySelector('#spectrograph'),\n    () => lastFrequency\n)\n\nvar state = {}\nvar gui = new Gui(state)\n\nvar currentProgram\n\n\n\n\n\n/*\n *      Notes and Programs - tinySynth presets and coverter\n*/\n\nvar currNotes = {}\nvar lowestNote = 45\nvar lastFrequency = 440\n\nfunction noteToFreq(note) {\n    note = 69 + Math.round((note - 69) * 1.6)\n    return 440 * Math.pow(2, (note - 69) / 12)\n}\n\nfunction playNote(note) {\n    if (currNotes[note]) return\n    var program = currentProgram\n    var vel = gui.getVelocity()\n    var freq = noteToFreq(note)\n    lastFrequency = freq\n    var time = gen.now() + 0.01 // playing at zero delay usually means clicks\n    currNotes[note] = gen.play(program, freq, vel, time)\n}\n\nfunction bendNote(target, note) {\n    gen.bend(currNotes[target], noteToFreq(note), 0.2)\n}\n\nfunction releaseNote(note, time) {\n    gen.release(currNotes[note], time)\n    currNotes[note] = null\n}\n\n\n\n\n// programs - importing presets and handling GUI\n\nvar inst = new Instruments()\nvar presets = new Presets()\n\n// preset pulldown change -> update program, inform UI\nfunction importPreset() {\n    var name = inst.names[presetPD.selectedIndex]\n    var qual = !!document.getElementById('quality').checked\n    var tsprog = inst.getProg(name, qual)\n    var prog = converter(tsprog)\n    applyPreset(prog)\n}\nfunction applyPreset(prog) {\n    gui.setProgram(prog)\n    currentProgram = prog\n}\n\n// init to preset 0 on page load\nsetTimeout(importPreset, 0)\n\n// receive program updates from gui\ngui.programChanged = function (prog) {\n    currentProgram = prog\n}\n\n\n\n\n\n\n\n/*\n *      Init - each time soundgen is hot-reloaded\n*/\n\nfunction init() {\n    if (gen) gen.dispose()\n    SoundGen = __webpack_require__(1)\n    gen = new SoundGen(ctx)\n    viz.setNode(gen.monitor)\n}\n\n\n\n\n\n/*\n* \n *      UI actions\n * \n*/\n\nvar keys = 'zxcvbnm,./ asdfghjkl;\\'qwertyuiop[1234567890-='\nvar shiftNote = 0\nvar shifting = false\n\nfunction keyToNote(k) {\n    var i = keys.indexOf(k)\n    return (i < 0) ? 0 : lowestNote + i\n}\n\nfunction playEvent(ev, down) {\n    var focused = document.activeElement\n    if (focused.type === 'text' || focused.type === 'textarea') return\n    \n    if (ev.key === 'Shift') {\n        if (down) {\n            shifting = true\n        } else {\n            shifting = false\n            if (shiftNote) releaseNote(shiftNote)\n            shiftNote = 0\n        }\n    } else {\n        var key = (ev.key && ev.key.toLowerCase()) || 'a'\n        var note = keyToNote(key)\n\n        if (down) {\n            if (shifting && shiftNote) {\n                bendNote(shiftNote, note)\n            } else {\n                if (note) playNote(note)\n                if (shifting) shiftNote = note\n            }\n            if (key === ' ') ev.preventDefault()\n            if (note && focused.tagName === 'SELECT' && !ev.metaKey) ev.preventDefault()\n        } else {\n            if (note && !shifting || note !== shiftNote) releaseNote(note)\n            if (!shifting) shiftNote = 0\n        }\n    }\n}\n\n\n\ndocument.querySelector('#play').onmousedown = ev => playEvent(ev, true)\ndocument.querySelector('#play').onmouseup = ev => playEvent(ev, false)\nwindow.onkeydown = ev => playEvent(ev, true)\nwindow.onkeyup = ev => playEvent(ev, false)\n\n\n\nvar presetPD = document.querySelector('#presets')\ninst.names.forEach((name, i) => {\n    var opt = document.createElement('option')\n    opt.text = name\n    presetPD.options[i] = opt\n})\npresetPD.onchange = importPreset\n\n\nvar presetPD2 = document.querySelector('#presets2')\nfor (var s in presets) {\n    var opt = document.createElement('option')\n    opt.text = s\n    presetPD2.options[presetPD2.options.length] = opt\n}\npresetPD2.onchange = function () {\n    var i = presetPD2.selectedIndex\n    var text = presetPD2.options[i].text\n    if (!text) return\n    var prog = presets[text]()\n    applyPreset(prog)\n    playNote(69)\n    releaseNote(69, gen.now() + 0.5)\n}\n\nvar redoBut = document.querySelector('#redo')\nredoBut.onmousedown = function () {\n    if (presetPD2.selectedIndex < 1) presetPD2.selectedIndex = 1\n    presetPD2.onchange()\n}\n\n\n// benchmark - just play a load of sounds overlapped\n\ndocument.querySelector('#benchmark').onmousedown = function () {\n    var N = 64\n    gen.setMaxVoices(N)\n    var carrier = {\n        type: 'sine',\n        freq: { p: 1, },\n        gain: { a: 0.01 },\n    }\n    var FM = {\n        type: 'sine',\n        target: '0.freq',\n        freq: {},\n        gain: {},\n    }\n    var filter = {\n        type: 'bandpass',\n        target: '',\n        freq: { t: 0, f: 1000, p: 1.1 },\n        gain: { a: 0.2 },\n    }\n    var program = [carrier, filter]\n    for (var i = 0; i < N; i++) {\n        carrier.freq.p = (Math.random() < 0.5) ? 1 : 0.5 + Math.random()\n        carrier.gain.a = Math.random() / 5\n        filter.freq.f = 500 + 1000 * Math.random()\n        var note = 45 + (70 * Math.random()) | 0\n        var freq = 440 * Math.pow(2, (note - 69) / 12)\n        var vol = 0.3\n        var time = gen.now() + i * (1 / N)\n        var releaseTime = time + 0.5 + Math.random()\n        gen.play(program, freq, vol, time, releaseTime)\n    }\n}\n\n\n\n\n\n\n/*\n *      HMR\n*/\n\n\nif (true) {\n    module.hot.accept(1, init)\n}\ninit()\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demo.js\n// module id = 2\n// module chunks = 0\n\n//# sourceURL=webpack:///./demo.js?")},function(module,exports,__webpack_require__){"use strict";eval("\n\n\nmodule.exports = Viz\n\n\nfunction Viz(ctx, div1, div2, div3, getFreq) {\n    this.enabled = true\n\n    sampleRate = ctx.sampleRate\n\n    var analyser1 = ctx.createAnalyser()\n    var analyser2 = ctx.createAnalyser()\n    var analyser3 = ctx.createAnalyser()\n\n    makeWaveform(analyser1, div1, getFreq)\n    makeEQ(analyser2, div2)\n    makeSpectrograph(analyser3, div3)\n\n    this.setNode = function (tgt) {\n        node = tgt\n        tgt.connect(analyser1)\n        tgt.connect(analyser2)\n        tgt.connect(analyser3)\n    }\n}\n\nvar el = document.querySelector('#viz')\nvar enabled = function () {\n    return (el) ? el.checked : true\n}\n\n\n\n/*\n*      shared\n*/\n\n// set at init\nvar node\nvar sampleRate\n\nvar minDecibels = -90\nvar maxDecibels = -20\n\nvar fmin = 150\nvar fmax = 12000\n\n// color value for freq data [0..1]\nfunction makeColor(val) {\n    var h = Math.round(-50 + 100 * val)\n    var s = Math.round(50 + 50 * val)\n    var l = Math.round(10 + 90 * val)\n    return `hsl(${h},${s}%,${l}%)`\n}\n\n// interpolate val [0..1] to [fmin..fmax]\nvar fractionToFreq = (function () {\n    var logRange = Math.log2(fmax) - Math.log2(fmin)\n    var logLow = Math.log2(fmin)\n    return function (value) {\n        return Math.pow(2, logLow + logRange * value)\n    }\n})()\n\nvar freqToIndex = function (analyser, freq) {\n    var nyquist = sampleRate / 2\n    return Math.round(freq / nyquist * analyser.frequencyBinCount)\n}\n\nvar timeToSamples = function (time) {\n    return sampleRate * time // samples/sec * sec\n}\n\nfunction findZeroPoint(buffer, start) {\n    var i = Math.floor(start) + 1\n    for (; i < buffer.length; i++) {\n        if (buffer[i - 1] >= 128 && buffer[i] <= 127) return i - 1\n    }\n    return buffer.length - 1\n}\n\n\n/*\n * \n *      graphs\n * \n*/\n\nfunction makeWaveform(analyser, canvas, getFreq) {\n    analyser.fftSize = 1 << 11\n    // analyser.smoothingTimeConstant = 0.7\n    analyser.minDecibels = minDecibels\n    analyser.maxDecibels = maxDecibels\n\n    var canvasCtx = canvas.getContext('2d')\n    var bufferLength = analyser.frequencyBinCount\n    var dataArray = new Uint8Array(bufferLength)\n    var width = canvas.width\n    var height = canvas.height\n    canvasCtx.fillStyle = makeColor(0)\n    canvasCtx.fillRect(0, 0, width, height)\n\n    var draw = function () {\n        // requestAnimationFrame(draw)        \n        if (!node || !enabled()) return\n\n        analyser.getByteTimeDomainData(dataArray)\n\n        var startIndex = findZeroPoint(dataArray, 0)\n        var periodSamples = 1.6 * sampleRate / getFreq()\n        if (startIndex === bufferLength - 1) startIndex = 0\n        var endIndex = Math.min(startIndex + periodSamples, bufferLength)\n\n        canvasCtx.fillStyle = makeColor(0)\n        canvasCtx.fillRect(0, 0, width, height)\n\n        canvasCtx.lineWidth = 1\n        canvasCtx.moveTo(0, height / 2)\n        canvasCtx.strokeStyle = makeColor(1)\n        canvasCtx.beginPath()\n\n        for (var x = 0; x < width; x++) {\n            var xval = x / width\n            var index = Math.round(startIndex + xval * (endIndex - startIndex))\n            var amt = +dataArray[index] / 256\n            var y = amt * height\n\n            canvasCtx.lineTo(x, y)\n        }\n        canvasCtx.stroke()\n    }\n    // requestAnimationFrame(draw)\n    setInterval(draw, 100)\n}\n\n\n\n\nfunction makeEQ(analyser, canvas) {\n    analyser.fftSize = 2048\n    analyser.smoothingTimeConstant = 0.3\n    analyser.minDecibels = minDecibels\n    analyser.maxDecibels = maxDecibels\n\n    var canvasCtx = canvas.getContext('2d')\n    var bufferLength = analyser.frequencyBinCount\n    var dataArray = new Uint8Array(bufferLength)\n    var width = canvas.width\n    var height = canvas.height\n    canvasCtx.fillStyle = makeColor(0)\n    canvasCtx.fillRect(0, 0, width, height)\n\n    var draw = function () {\n        requestAnimationFrame(draw)\n        if (!node || !enabled()) return\n\n        canvasCtx.fillStyle = makeColor(0)\n        canvasCtx.fillRect(0, 0, width, height)\n\n        analyser.getByteFrequencyData(dataArray)\n\n        for (var x = 0; x < width; x++) {\n            var val = x / (width - 1)\n            var freq = fractionToFreq(val)\n            var index = freqToIndex(analyser, freq)\n            var amt = +dataArray[index] / 256\n            var y = Math.round(amt * height)\n\n            canvasCtx.fillStyle = makeColor(amt)\n            canvasCtx.fillRect(x, height - y, 1, y)\n        }\n    }\n    requestAnimationFrame(draw)\n}\n\n\n\n\n\nfunction makeSpectrograph(analyser, canvas) {\n    analyser.fftSize = 1024\n    analyser.smoothingTimeConstant = 0.3\n    analyser.minDecibels = minDecibels\n    analyser.maxDecibels = maxDecibels\n\n    var canvasCtx = canvas.getContext('2d')\n    var bufferLength = analyser.frequencyBinCount\n    var dataArray = new Uint8Array(bufferLength)\n\n    var width = canvas.width\n    var height = canvas.height\n    canvasCtx.fillStyle = makeColor(0)\n    canvasCtx.fillRect(0, 0, width, height)\n\n    var speed = 1\n\n    var draw = function () {\n        requestAnimationFrame(draw)\n        if (!node || !enabled()) return\n\n        analyser.getByteFrequencyData(dataArray)\n\n        canvasCtx.drawImage(canvas, -speed, 0, width, height)\n\n        for (var y = 0; y < height; y++) {\n            var val = (height - 1 - y) / (height - 1)\n            var freq = fractionToFreq(val)\n            var index = freqToIndex(analyser, freq)\n\n            var amt = +dataArray[index] / 256\n            canvasCtx.fillStyle = makeColor(amt)\n            canvasCtx.fillRect(width - speed, y, speed, 1)\n        }\n    }\n    requestAnimationFrame(draw)\n}\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./viz.js\n// module id = 3\n// module chunks = 0\n\n//# sourceURL=webpack:///./viz.js?")},function(module,exports,__webpack_require__){"use strict";eval("\n\n\nvar defs = __webpack_require__(0)\nvar Menus = __webpack_require__(5)\n\n\nmodule.exports = GUI\n\n\n\nfunction GUI(state) {\n    var self = this\n\n    // build dat-gui menus\n    var menus = new Menus()\n    menus.init(document.querySelector('#menus'), 420, 4)\n\n    // called from above when importing a preset\n    this.setProgram = function (prog) {\n        showProgramText(prog)\n        menus.showProgram(prog)\n    }\n\n    // to be overridden from client\n    this.programChanged = function (prog) { }\n\n    // events from dat-gui\n    menus.onChange = function (prog) {\n        self.programChanged(prog)\n        showProgramText(prog)\n    }\n    this.getVelocity = function () {\n        return menus.getVelocity()\n    }\n\n    // set events from here elsewards\n    onChange = function (prog) {\n        self.programChanged(prog)\n        menus.showProgram(prog)\n    }\n\n}\n\nvar onChange\n\n\n\n\n\n/*  \n *  \n *          PROGRAM TEXT STUFF\n * \n*/\n\nvar progText = document.getElementById('progText')\nvar defSig = new defs.Signal('', '', 0, new defs.Sweep(), new defs.Envelope())\n\n\n// when program text is edited\nprogText.oninput = function (ev) {\n    var txt = ev.target.value\n    var parsed\n    try {\n        eval('parsed = ' + txt.split('\\n').join(' '))\n    } catch (e) { }\n    var okay = parsed && parsed.length && parsed[0]\n    if (okay) parsed.forEach(o => okay = okay && (typeof o === 'object'))\n    if (okay) onChange(parsed)\n    progText.style.backgroundColor = (okay) ? '#fff' : '#fee'\n}\n\n\nfunction showProgramText(prog) {\n    var pared = removeDefaults(prog)\n    progText.value = formatProgram(pared)\n}\n\nfunction removeDefaults(prog) {\n    var fill = function (prop, src, tgt, def) {\n        if (!src || src[prop] === undefined) return\n        if (src[prop] === '') return\n        if (src[prop] !== def[prop]) tgt[prop] = src[prop]\n    }\n    return prog.map(obj => {\n        var ret = { type: 'sine' }\n        sigProps.forEach(p => fill(p, obj, ret, defSig))\n        if (typeof obj.freq !== 'number') {\n            ret.freq = {}\n            sweepProps.forEach(p => fill(p, obj.freq, ret.freq, defSig.freq))\n            envProps.forEach(p => fill(p, obj.freq, ret.freq, defSig.freq))\n        } else ret.freq = obj.freq\n        if (typeof obj.gain !== 'number') {\n            ret.gain = {}\n            sweepProps.forEach(p => fill(p, obj.gain, ret.gain, defSig.gain))\n            envProps.forEach(p => fill(p, obj.gain, ret.gain, defSig.gain))\n        } else ret.gain = obj.gain\n        return ret\n    })\n}\n\n\n\nvar sigProps = ['type', 'target', 'delay']\nvar sweepProps = ['t', 'f', 'p', 'q', 'k', 'j', 'jt']\nvar envProps = ['v', 'a', 'h', 'd', 's', 'r', 'k']\n\n\n\nfunction formatProgram(prog) {\n    var lines = []\n    prog.forEach(sig => {\n        var line1 = '  { ' + sigProps.map(p => {\n            return sig[p] ? formatProp(sig, p) : ''\n        }).filter(p => p).join(', ')\n        if (line1.length > 5) line1 += ', '\n        var line2 = formatLine('freq', sig, sweepProps) + ', '\n        var line3 = formatLine('gain', sig, envProps) + ' }, '\n        lines.push(line1, line2, line3)\n    })\n    lines.push(']')\n    lines[0] = '[' + lines[0].substr(1)\n    return lines.join('\\n')\n}\n\nfunction formatLine(name, signal, propList) {\n    if (typeof signal[name] === 'number') return `    ${name}: ${signal[name]},`\n    return `    ${name}: { ` + propList.map(p => {\n        return formatProp(signal[name], p)\n    }).filter(p => p).join(', ') + ' }'\n}\n\nfunction formatProp(obj, p) {\n    if (!obj) return ''\n    var prop = obj[p]\n    if (isNaN(prop) && !prop) return ''\n    if (typeof prop === 'string') return `${p}: '${prop}'`\n    if (typeof prop === 'number') return `${p}: ${round(prop)}`\n    if (prop.length) return `${p}: [ ${prop.map(round).join(', ')} ]`\n    return `${p}: '${obj[p]}'`\n}\n\n\nvar round = (n) => Math.round(n * 100) / 100\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./gui.js\n// module id = 4\n// module chunks = 0\n\n//# sourceURL=webpack:///./gui.js?")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar dat = __webpack_require__(6)\nvar defs = __webpack_require__(0)\n\n\nmodule.exports = Menus\n\n\n\nfunction Menus() {\n    var self = this\n    var state = {}\n    var gui\n\n    this.init = function (container, width, numSignals) {\n        gui = new dat.GUI({\n            autoPlace: false,\n            hideable: false,\n            width: width,\n        })\n        window.gui = gui\n\n        buildMenuOptions(gui, state, numSignals)\n\n        container.appendChild(gui.domElement)\n    }\n\n    this.showProgram = function (prog) {\n        setFromProgram(state, prog, gui)\n    }\n\n    // events etc\n    onChange = function (ev) {\n        setProgramFromMenus(currProg, state)\n        self.onChange(currProg)\n    }\n\n    // accessed by client code\n    this.getVelocity = function () { return velocity }\n    this.onChange = function () { }\n\n\n}\n\nvar onChange\nvar currProg = { freq: {}, gain: {} }\nvar velocity = 1\n\n\n\n\n\n\n/*  \n *  \n *          PROGRAM WRANGLING\n * \n*/\n\n\nvar defSig = new defs.Signal('', '', 0, new defs.Sweep(), new defs.Envelope(), {})\ndefSig.freq.j = ''\ndefSig.freq.jt = ''\n\n\nvar sweepProps = ['t', 'f', 'p', 'q', 'k', 'j', 'jt']\nvar envProps = ['v', 'a', 'h', 'd', 's', 'r', 'k']\nvar sigTypes = [\n    'sine',\n    'square',\n    'triangle',\n    'sawtooth',\n    'n0',\n    'n1',\n    'np',\n    'w9999',\n    'lowpass',\n    'highpass',\n    'bandpass',\n    'lowshelf',\n    'highshelf',\n    'peaking',\n    'notch',\n    'allpass',\n]\n\n\nfunction setFromProgram(state, prog, gui) {\n    currProg = prog\n    var sweepTgt = state.sweep.forSignal\n    var envTgt = state.envelope.forSignal\n    state.signals.forEach(function (obj, i) {\n        var signal = prog[i]\n        var f = gui.__folders['Signal ' + i]\n        obj.enabled = !!signal\n        if (signal) {\n            obj.type = signal.type || 'sine'\n            obj.target = signal.target || ''\n            if (f.closed) f.open()\n        } else {\n            if (!f.closed) f.close()\n        }\n    })\n    drawMenuTargets(state, gui)\n}\n\nfunction drawMenuTargets(state, gui) {\n    setSweepGUI(state, currProg)\n    setEnvelopeGUI(state, currProg)\n    updateGUI(gui)\n}\n\n\nfunction updateGUI(obj) {\n    if (obj.__controllers) obj.__controllers.forEach(c => c.updateDisplay())\n    if (obj.__folders) for (var s in obj.__folders) updateGUI(obj.__folders[s])\n}\n\n\nfunction setSweepGUI(state, prog) {\n    var n = state.sweep.forSignal\n    var signal = prog[n]\n    var obj = signal[state.sweep.forProp]\n    var def = defSig[state.sweep.forProp]\n    if (!obj) return\n    sweepProps.forEach(p => {\n        var val = obj[p]\n        state.sweep[p] = (val === undefined) ? def[p] : val\n    })\n}\n\n\nfunction setEnvelopeGUI(state, prog) {\n    var n = state.envelope.forSignal\n    var signal = prog[n]\n    var obj = signal[state.envelope.forProp]\n    var def = defSig[state.envelope.forProp]\n    if (!obj) return\n    envProps.forEach(p => {\n        var val = obj[p]\n        state.envelope[p] = (val === undefined) ? def[p] : val\n    })\n}\n\n\n\n\n\n// update program object from current UI state\n\nfunction setProgramFromMenus(currProg, state) {\n    // conform number and enabled-ness of signals\n    state.signals.forEach((obj, i) => {\n        if (obj.enabled && !currProg[i]) currProg[i] = new defs.Signal()\n        if (currProg[i] && !obj.enabled) currProg[i].type = 'none'\n    })\n    // set type/target of all signals\n    state.signals.forEach((obj, i) => {\n        var signal = currProg[i]\n        if (obj.enabled) {\n            signal.type = obj.type || ''\n            signal.target = obj.target || ''\n            signal.delay = obj.delay || 0\n        }\n    })\n    var sweepObj = currProg[state.sweep.forSignal][state.sweep.forProp]\n    if (sweepObj) {\n        sweepProps.forEach(p => sweepObj[p] = state.sweep[p])\n    }\n    var envObj = currProg[state.envelope.forSignal][state.envelope.forProp]\n    if (envObj) {\n        envProps.forEach(p => envObj[p] = state.envelope[p])\n    }\n}\n\n\n\n\n\n\n\n/*\n *  \n *          GUI BUILDING\n * \n*/\n\nfunction buildMenuOptions(gui, state, numSignals) {\n    state.vel = velocity\n    gui.add(state, 'vel', 0, 1).step(0.01).onChange(v => { velocity = v }).name('Velocity')\n    state.signals = []\n    for (var i = 0; i < numSignals; i++) {\n        state.signals[i] = createSignalGUI(gui, i)\n    }\n    addSweepFolder(gui, state, numSignals)\n    addEnvelopeFolder(gui, state, numSignals)\n}\n\n\nfunction createSignalGUI(gui, num) {\n    var f = gui.addFolder('Signal ' + num)\n    if (num === 0) f.open()\n    var obj = {\n        enabled: (num === 0),\n        type: defSig.type,\n        target: defSig.target,\n        delay: 0,\n    }\n    f.add(obj, 'enabled').onChange(onChange)\n    f.add(obj, 'type', sigTypes).onChange(onChange)\n    f.add(obj, 'target').name('target (0.freq..)').onChange(onChange)\n    f.add(obj, 'delay', 0, 1).step(0.01).name('delay').onChange(onChange)\n    return obj\n}\n\n\nfunction addProp(obj, f, prop, defObj, lo, hi, step, disp) {\n    obj[prop] = defObj[prop]\n    var res = (lo || hi) ?\n        f.add(obj, prop, lo, hi) :\n        f.add(obj, prop)\n    if (step) res = res.step(step)\n    res.name(prop + ' - ' + disp)\n    res.onChange(onChange)\n}\n\n\n\nfunction addSweepFolder(gui, state, numSignals) {\n    var f = gui.addFolder('Sweep')\n    f.open()\n    var obj = {\n        forSignal: 0,\n        forProp: 'freq',\n    }\n    var handle = function () { drawMenuTargets(state, gui) }\n    f.add(obj, 'forSignal', 0, numSignals - 1).step(1).name('For signal').onChange(handle)\n    f.add(obj, 'forProp', ['freq', 'gain']).name('For prop').onChange(handle)\n\n    addProp(obj, f, 't', defSig.freq, 0, 13, 0.1, 'mult')\n    addProp(obj, f, 'f', defSig.freq, -10, 200, 0.1, 'add')\n    addProp(obj, f, 'p', defSig.freq, 0, 2, 0.01, 'bend')\n    addProp(obj, f, 'q', defSig.freq, 0, 2, 0.01, 'bend const')\n    addProp(obj, f, 'k', defSig.freq, -2, 2, 0.01, 'vol keying')\n    addProp(obj, f, 'j', defSig.freq, 0, 0, 0, 'jumps')\n    addProp(obj, f, 'jt', defSig.freq, 0, 0, 0, 'jump times')\n    state.sweep = obj\n}\n\n\nfunction addEnvelopeFolder(gui, state, numSignals) {\n    var f = gui.addFolder('Envelope')\n    f.open()\n    var obj = {\n        forSignal: 0,\n        forProp: 'gain',\n    }\n    var handle = function () { drawMenuTargets(state, gui) }\n    f.add(obj, 'forSignal', 0, numSignals - 1).step(1).name('For signal').onChange(handle)\n    f.add(obj, 'forProp', ['freq', 'gain', 'Q']).name('For prop').onChange(handle)\n\n    addProp(obj, f, 'v', defSig.gain, 0, 10, 0.1, 'peak')\n    addProp(obj, f, 'a', defSig.gain, 0, 2, 0.001, 'attack time')\n    addProp(obj, f, 'h', defSig.gain, 0, 2, 0.001, 'hold time')\n    addProp(obj, f, 'd', defSig.gain, 0, 10, 0.01, 'decay const')\n    addProp(obj, f, 's', defSig.gain, 0, 10, 0.1, 'sus level')\n    addProp(obj, f, 'r', defSig.gain, 0, 10, 0.01, 'release const')\n    addProp(obj, f, 'k', defSig.gain, -2, 2, 0.01, 'vol keying')\n    state.envelope = obj\n}\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./menus.js\n// module id = 5\n// module chunks = 0\n\n//# sourceURL=webpack:///./menus.js?")},function(module,exports,__webpack_require__){eval('!function(e,t){ true?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dat=t():e.dat=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(1),r=o(i);t.default=r.default,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(2),r=o(i),a=n(6),l=o(a),s=n(3),u=o(s),d=n(7),c=o(d),f=n(8),_=o(f),p=n(10),h=o(p),m=n(11),b=o(m),g=n(12),v=o(g),y=n(13),w=o(y),x=n(14),E=o(x),C=n(15),A=o(C),S=n(16),k=o(S),O=n(9),T=o(O),R=n(17),L=o(R);t.default={color:{Color:r.default,math:l.default,interpret:u.default},controllers:{Controller:c.default,BooleanController:_.default,OptionController:h.default,StringController:b.default,NumberController:v.default,NumberControllerBox:w.default,NumberControllerSlider:E.default,FunctionController:A.default,ColorController:k.default},dom:{dom:T.default},gui:{GUI:L.default},GUI:L.default},e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(h.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(h.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function a(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(h.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(h.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}t.__esModule=!0;var l=n(3),s=o(l),u=n(6),d=o(u),c=n(4),f=o(c),_=n(5),p=o(_),h=function(){function e(){if(i(this,e),this.__state=s.default.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return e.prototype.toString=function(){return(0,f.default)(this)},e.prototype.toHexString=function(){return(0,f.default)(this,!0)},e.prototype.toOriginal=function(){return this.__state.conversion.write(this)},e}();h.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=d.default.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");p.default.extend(e.__state,d.default.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},h.recalculateHSV=function(e){var t=d.default.rgb_to_hsv(e.r,e.g,e.b);p.default.extend(e.__state,{s:t.s,v:t.v}),p.default.isNaN(t.h)?p.default.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},h.COMPONENTS=["r","g","b","h","s","v","hex","a"],r(h.prototype,"r",2),r(h.prototype,"g",1),r(h.prototype,"b",0),a(h.prototype,"h"),a(h.prototype,"s"),a(h.prototype,"v"),Object.defineProperty(h.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(h.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=d.default.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),t.default=h,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(4),r=o(i),a=n(5),l=o(a),s=[{litmus:l.default.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:r.default},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:r.default},CSS_RGB:{read:function(e){var t=e.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:r.default},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:r.default}}},{litmus:l.default.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:l.default.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:l.default.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(l.default.isNumber(e.r)&&l.default.isNumber(e.g)&&l.default.isNumber(e.b)&&l.default.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(l.default.isNumber(e.r)&&l.default.isNumber(e.g)&&l.default.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(l.default.isNumber(e.h)&&l.default.isNumber(e.s)&&l.default.isNumber(e.v)&&l.default.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(l.default.isNumber(e.h)&&l.default.isNumber(e.s)&&l.default.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],u=void 0,d=void 0,c=function(){d=!1;var e=arguments.length>1?l.default.toArray(arguments):arguments[0];return l.default.each(s,function(t){if(t.litmus(e))return l.default.each(t.conversions,function(t,n){if(u=t.read(e),d===!1&&u!==!1)return d=u,u.conversionName=n,u.conversion=t,l.default.BREAK}),l.default.BREAK}),d};t.default=c,e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){var n=e.__state.conversionName.toString(),o=Math.round(e.r),i=Math.round(e.g),r=Math.round(e.b),a=e.a,l=Math.round(e.h),s=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var d=e.hex.toString(16);d.length<6;)d="0"+d;return"#"+d}return"CSS_RGB"===n?"rgb("+o+","+i+","+r+")":"CSS_RGBA"===n?"rgba("+o+","+i+","+r+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+i+","+r+"]":"RGBA_ARRAY"===n?"["+o+","+i+","+r+","+a+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+l+",s:"+s+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+l+",s:"+s+",v:"+u+",a:"+a+"}":"unknown format"},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0;var n=Array.prototype.forEach,o=Array.prototype.slice,i={BREAK:{},extend:function(e){return this.each(o.call(arguments,1),function(t){var n=this.isObject(t)?Object.keys(t):[];n.forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(o.call(arguments,1),function(t){var n=this.isObject(t)?Object.keys(t):[];n.forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=o.call(arguments);return function(){for(var t=o.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,o){if(e)if(n&&e.forEach&&e.forEach===n)e.forEach(t,o);else if(e.length===e.length+0){var i=void 0,r=void 0;for(i=0,r=e.length;i<r;i++)if(i in e&&t.call(o,e[i],i)===this.BREAK)return}else for(var a in e)if(t.call(o,e[a],a)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var o=void 0;return function(){function i(){o=null,n||e.apply(r,a)}var r=this,a=arguments,l=n||!o;clearTimeout(o),o=setTimeout(i,t),l&&e.apply(r,a)}},toArray:function(e){return e.toArray?e.toArray():o.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}};t.default=i,e.exports=t.default},function(e,t){"use strict";t.__esModule=!0;var n=void 0,o={hsv_to_rgb:function(e,t,n){var o=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),r=n*(1-t),a=n*(1-i*t),l=n*(1-(1-i)*t),s=[[n,l,r],[a,n,r],[r,n,l],[r,a,n],[l,r,n],[n,r,a]][o];return{r:255*s[0],g:255*s[1],b:255*s[2]}},rgb_to_hsv:function(e,t,n){var o=Math.min(e,t,n),i=Math.max(e,t,n),r=i-o,a=void 0,l=void 0;return 0===i?{h:NaN,s:0,v:0}:(l=r/i,a=e===i?(t-n)/r:t===i?2+(n-e)/r:4+(e-t)/r,a/=6,a<0&&(a+=1),{h:360*a,s:l,v:i/255})},rgb_to_hex:function(e,t,n){var o=this.hex_with_component(0,2,e);return o=this.hex_with_component(o,1,t),o=this.hex_with_component(o,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,o){return o<<(n=8*t)|e&~(255<<n)}};t.default=o,e.exports=t.default},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=function(){function e(t,o){n(this,e),this.initialValue=t[o],this.domElement=document.createElement("div"),this.object=t,this.property=o,this.__onChange=void 0,this.__onFinishChange=void 0}return e.prototype.onChange=function(e){return this.__onChange=e,this},e.prototype.onFinishChange=function(e){return this.__onFinishChange=e,this},e.prototype.setValue=function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},e.prototype.getValue=function(){return this.object[this.property]},e.prototype.updateDisplay=function(){return this},e.prototype.isModified=function(){return this.initialValue!==this.getValue()},e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=n(7),s=o(l),u=n(9),d=o(u),c=function(e){function t(n,o){function a(){s.setValue(!s.__prev)}i(this,t);var l=r(this,e.call(this,n,o)),s=l;return l.__prev=l.getValue(),l.__checkbox=document.createElement("input"),l.__checkbox.setAttribute("type","checkbox"),d.default.bind(l.__checkbox,"change",a,!1),l.domElement.appendChild(l.__checkbox),l.updateDisplay(),l}return a(t,e),t.prototype.setValue=function(t){var n=e.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n},t.prototype.updateDisplay=function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),e.prototype.updateDisplay.call(this)},t}(s.default);t.default=c,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if("0"===e||a.default.isUndefined(e))return 0;var t=e.match(u);return a.default.isNull(t)?0:parseFloat(t[1])}t.__esModule=!0;var r=n(5),a=o(r),l={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},s={};a.default.each(l,function(e,t){a.default.each(e,function(e){s[e]=t})});var u=/(\\d+(\\.\\d+)?)px/,d={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var o=n,i=t;a.default.isUndefined(i)&&(i=!0),a.default.isUndefined(o)&&(o=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),o&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,o){var i=n||{},r=s[t];if(!r)throw new Error("Event type "+t+" not supported.");var l=document.createEvent(r);switch(r){case"MouseEvents":var u=i.x||i.clientX||0,d=i.y||i.clientY||0;l.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,d,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=l.initKeyboardEvent||l.initKeyEvent;a.default.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:l.initEvent(t,i.bubbles||!1,i.cancelable||!0)}a.default.defaults(l,o),e.dispatchEvent(l)},bind:function(e,t,n,o){var i=o||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),d},unbind:function(e,t,n,o){var i=o||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),d},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);n.indexOf(t)===-1&&(n.push(t),e.className=n.join(" ").replace(/^\\s+/,"").replace(/\\s+$/,""))}return d},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),o=n.indexOf(t);o!==-1&&(n.splice(o,1),e.className=n.join(" "))}else e.className=void 0;return d},hasClass:function(e,t){return new RegExp("(?:^|\\\\s+)"+t+"(?:\\\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return i(t["border-left-width"])+i(t["border-right-width"])+i(t["padding-left"])+i(t["padding-right"])+i(t.width)},getHeight:function(e){var t=getComputedStyle(e);return i(t["border-top-width"])+i(t["border-bottom-width"])+i(t["padding-top"])+i(t["padding-bottom"])+i(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent;while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};t.default=d,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=n(7),s=o(l),u=n(9),d=o(u),c=n(5),f=o(c),_=function(e){function t(n,o,a){i(this,t);var l=r(this,e.call(this,n,o)),s=a,u=l;if(l.__select=document.createElement("select"),f.default.isArray(s)){var c={};f.default.each(s,function(e){c[e]=e}),s=c}return f.default.each(s,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),u.__select.appendChild(n)}),l.updateDisplay(),d.default.bind(l.__select,"change",function(){var e=this.options[this.selectedIndex].value;u.setValue(e)}),l.domElement.appendChild(l.__select),l}return a(t,e),t.prototype.setValue=function(t){var n=e.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n},t.prototype.updateDisplay=function(){return d.default.isActive(this.__select)?this:(this.__select.value=this.getValue(),e.prototype.updateDisplay.call(this))},t}(s.default);t.default=_,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=n(7),s=o(l),u=n(9),d=o(u),c=function(e){function t(n,o){function a(){u.setValue(u.__input.value)}function l(){u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}i(this,t);var s=r(this,e.call(this,n,o)),u=s;return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),d.default.bind(s.__input,"keyup",a),d.default.bind(s.__input,"change",a),d.default.bind(s.__input,"blur",l),d.default.bind(s.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return a(t,e),t.prototype.updateDisplay=function(){return d.default.isActive(this.__input)||(this.__input.value=this.getValue()),e.prototype.updateDisplay.call(this)},t}(s.default);t.default=c,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}t.__esModule=!0;var s=n(7),u=o(s),d=n(5),c=o(d),f=function(e){function t(n,o,a){i(this,t);var s=r(this,e.call(this,n,o)),u=a||{};return s.__min=u.min,s.__max=u.max,s.__step=u.step,c.default.isUndefined(s.__step)?0===s.initialValue?s.__impliedStep=1:s.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(s.initialValue))/Math.LN10))/10:s.__impliedStep=s.__step,s.__precision=l(s.__impliedStep),s}return a(t,e),t.prototype.setValue=function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!==0&&(n=Math.round(n/this.__step)*this.__step),e.prototype.setValue.call(this,n)},t.prototype.min=function(e){return this.__min=e,this},t.prototype.max=function(e){return this.__max=e,this},t.prototype.step=function(e){return this.__step=e,this.__impliedStep=e,this.__precision=l(e),this},t}(u.default);t.default=f,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}t.__esModule=!0;var s=n(12),u=o(s),d=n(9),c=o(d),f=n(5),_=o(f),p=function(e){function t(n,o,a){function l(){var e=parseFloat(m.__input.value);_.default.isNaN(e)||m.setValue(e)}function s(){m.__onFinishChange&&m.__onFinishChange.call(m,m.getValue())}function u(){s()}function d(e){var t=b-e.clientY;m.setValue(m.getValue()+t*m.__impliedStep),b=e.clientY}function f(){c.default.unbind(window,"mousemove",d),c.default.unbind(window,"mouseup",f),s()}function p(e){c.default.bind(window,"mousemove",d),c.default.bind(window,"mouseup",f),b=e.clientY}i(this,t);var h=r(this,e.call(this,n,o,a));h.__truncationSuspended=!1;var m=h,b=void 0;return h.__input=document.createElement("input"),h.__input.setAttribute("type","text"),c.default.bind(h.__input,"change",l),c.default.bind(h.__input,"blur",u),c.default.bind(h.__input,"mousedown",p),c.default.bind(h.__input,"keydown",function(e){13===e.keyCode&&(m.__truncationSuspended=!0,this.blur(),m.__truncationSuspended=!1,s())}),h.updateDisplay(),h.domElement.appendChild(h.__input),h}return a(t,e),t.prototype.updateDisplay=function(){return this.__input.value=this.__truncationSuspended?this.getValue():l(this.getValue(),this.__precision),e.prototype.updateDisplay.call(this)},t}(u.default);t.default=p,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n,o,i){return o+(i-o)*((e-t)/(n-t))}t.__esModule=!0;var s=n(12),u=o(s),d=n(9),c=o(d),f=function(e){function t(n,o,a,s,u){function d(e){document.activeElement.blur(),c.default.bind(window,"mousemove",f),c.default.bind(window,"mouseup",_),f(e)}function f(e){e.preventDefault();var t=h.__background.getBoundingClientRect();return h.setValue(l(e.clientX,t.left,t.right,h.__min,h.__max)),!1}function _(){c.default.unbind(window,"mousemove",f),c.default.unbind(window,"mouseup",_),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}i(this,t);var p=r(this,e.call(this,n,o,{min:a,max:s,step:u})),h=p;return p.__background=document.createElement("div"),p.__foreground=document.createElement("div"),c.default.bind(p.__background,"mousedown",d),c.default.addClass(p.__background,"slider"),c.default.addClass(p.__foreground,"slider-fg"),p.updateDisplay(),p.__background.appendChild(p.__foreground),p.domElement.appendChild(p.__background),p}return a(t,e),t.prototype.updateDisplay=function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",e.prototype.updateDisplay.call(this)},t}(u.default);t.default=f,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=n(7),s=o(l),u=n(9),d=o(u),c=function(e){function t(n,o,a){i(this,t);var l=r(this,e.call(this,n,o)),s=l;return l.__button=document.createElement("div"),l.__button.innerHTML=void 0===a?"Fire":a,d.default.bind(l.__button,"click",function(e){return e.preventDefault(),s.fire(),!1}),d.default.addClass(l.__button,"button"),l.domElement.appendChild(l.__button),l}return a(t,e),t.prototype.fire=function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())},t}(s.default);t.default=c,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n,o){e.style.background="",g.default.each(y,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+o+" 100%); "})}function s(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}t.__esModule=!0;var u=n(7),d=o(u),c=n(9),f=o(c),_=n(2),p=o(_),h=n(3),m=o(h),b=n(5),g=o(b),v=function(e){function t(n,o){function a(e){h(e),f.default.bind(window,"mousemove",h),f.default.bind(window,"mouseup",u)}function u(){f.default.unbind(window,"mousemove",h),f.default.unbind(window,"mouseup",u),_()}function d(){var e=(0,m.default)(this.value);e!==!1?(y.__color.__state=e,y.setValue(y.__color.toOriginal())):this.value=y.__color.toString()}function c(){f.default.unbind(window,"mousemove",b),f.default.unbind(window,"mouseup",c),_()}function _(){y.__onFinishChange&&y.__onFinishChange.call(y,y.__color.toOriginal())}function h(e){e.preventDefault();var t=y.__saturation_field.getBoundingClientRect(),n=(e.clientX-t.left)/(t.right-t.left),o=1-(e.clientY-t.top)/(t.bottom-t.top);return o>1?o=1:o<0&&(o=0),n>1?n=1:n<0&&(n=0),y.__color.v=o,y.__color.s=n,y.setValue(y.__color.toOriginal()),!1}function b(e){e.preventDefault();var t=y.__hue_field.getBoundingClientRect(),n=1-(e.clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),y.__color.h=360*n,y.setValue(y.__color.toOriginal()),!1}i(this,t);var v=r(this,e.call(this,n,o));v.__color=new p.default(v.getValue()),v.__temp=new p.default(0);var y=v;v.domElement=document.createElement("div"),f.default.makeSelectable(v.domElement,!1),v.__selector=document.createElement("div"),v.__selector.className="selector",v.__saturation_field=document.createElement("div"),v.__saturation_field.className="saturation-field",v.__field_knob=document.createElement("div"),v.__field_knob.className="field-knob",v.__field_knob_border="2px solid ",v.__hue_knob=document.createElement("div"),v.__hue_knob.className="hue-knob",v.__hue_field=document.createElement("div"),v.__hue_field.className="hue-field",v.__input=document.createElement("input"),v.__input.type="text",v.__input_textShadow="0 1px 1px ",f.default.bind(v.__input,"keydown",function(e){13===e.keyCode&&d.call(this)}),f.default.bind(v.__input,"blur",d),f.default.bind(v.__selector,"mousedown",function(){f.default.addClass(this,"drag").bind(window,"mouseup",function(){f.default.removeClass(y.__selector,"drag")})});var w=document.createElement("div");return g.default.extend(v.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),g.default.extend(v.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:v.__field_knob_border+(v.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),g.default.extend(v.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),g.default.extend(v.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),g.default.extend(w.style,{width:"100%",height:"100%",background:"none"}),l(w,"top","rgba(0,0,0,0)","#000"),g.default.extend(v.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),s(v.__hue_field),g.default.extend(v.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:v.__input_textShadow+"rgba(0,0,0,0.7)"}),f.default.bind(v.__saturation_field,"mousedown",a),f.default.bind(v.__field_knob,"mousedown",a),f.default.bind(v.__hue_field,"mousedown",function(e){b(e),f.default.bind(window,"mousemove",b),f.default.bind(window,"mouseup",c)}),v.__saturation_field.appendChild(w),v.__selector.appendChild(v.__field_knob),v.__selector.appendChild(v.__saturation_field),v.__selector.appendChild(v.__hue_field),v.__hue_field.appendChild(v.__hue_knob),v.domElement.appendChild(v.__input),v.domElement.appendChild(v.__selector),v.updateDisplay(),v}return a(t,e),t.prototype.updateDisplay=function(){var e=(0,m.default)(this.getValue());if(e!==!1){var t=!1;g.default.each(p.default.COMPONENTS,function(n){if(!g.default.isUndefined(e[n])&&!g.default.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&g.default.extend(this.__color.__state,e)}g.default.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;g.default.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,l(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),g.default.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})},t}(d.default),y=["-moz-","-o-","-webkit-","-ms-",""];t.default=v,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o=document.createElement("li");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,n):e.__ul.appendChild(o),e.onResize(),o}function r(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];t?n.innerHTML=n.value+"*":n.innerHTML=n.value}function a(e,t,n){if(n.__li=t,n.__gui=e,U.default.extend(n,{options:function(t){if(arguments.length>1){var o=n.__li.nextElementSibling;return n.remove(),s(e,n.object,n.property,{before:o,factoryArgs:[U.default.toArray(arguments)]})}if(U.default.isArray(t)||U.default.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),s(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof N.default){var o=new B.default(n.object,n.property,{\nmin:n.__min,max:n.__max,step:n.__step});U.default.each(["updateDisplay","onChange","onFinishChange","step"],function(e){var t=n[e],i=o[e];n[e]=o[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(o,e),t.apply(n,e)}}),z.default.addClass(t,"has-slider"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof B.default){var i=function(t){if(U.default.isNumber(n.__min)&&U.default.isNumber(n.__max)){var o=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var r=s(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return r.name(o),i&&r.listen(),r}return t};n.min=U.default.compose(i,n.min),n.max=U.default.compose(i,n.max)}else n instanceof O.default?(z.default.bind(t,"click",function(){z.default.fakeEvent(n.__checkbox,"click")}),z.default.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof R.default?(z.default.bind(t,"click",function(){z.default.fakeEvent(n.__button,"click")}),z.default.bind(t,"mouseover",function(){z.default.addClass(n.__button,"hover")}),z.default.bind(t,"mouseout",function(){z.default.removeClass(n.__button,"hover")})):n instanceof j.default&&(z.default.addClass(t,"color"),n.updateDisplay=U.default.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=U.default.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&r(e.getRoot(),!0),t},n.setValue)}function l(e,t){var n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(o!==-1){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[t.property]=t,n.load&&n.load.remembered){var r=n.load.remembered,a=void 0;if(r[e.preset])a=r[e.preset];else{if(!r[Q])return;a=r[Q]}if(a[o]&&void 0!==a[o][t.property]){var l=a[o][t.property];t.initialValue=l,t.setValue(l)}}}}function s(e,t,n,o){if(void 0===t[n])throw new Error(\'Object "\'+t+\'" has no property "\'+n+\'"\');var r=void 0;if(o.color)r=new j.default(t,n);else{var s=[t,n].concat(o.factoryArgs);r=C.default.apply(e,s)}o.before instanceof S.default&&(o.before=o.before.__li),l(e,r),z.default.addClass(r.domElement,"c");var u=document.createElement("span");z.default.addClass(u,"property-name"),u.innerHTML=r.property;var d=document.createElement("div");d.appendChild(u),d.appendChild(r.domElement);var c=i(e,d,o.before);return z.default.addClass(c,oe.CLASS_CONTROLLER_ROW),r instanceof j.default?z.default.addClass(c,"color"):z.default.addClass(c,g(r.getValue())),a(e,c,r),e.__controllers.push(r),r}function u(e,t){return document.location.href+"."+t}function d(e,t,n){var o=document.createElement("option");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function c(e,t){t.style.display=e.useLocalStorage?"block":"none"}function f(e){var t=e.__save_row=document.createElement("li");z.default.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),z.default.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",z.default.addClass(n,"button gears");var o=document.createElement("span");o.innerHTML="Save",z.default.addClass(o,"button"),z.default.addClass(o,"save");var i=document.createElement("span");i.innerHTML="New",z.default.addClass(i,"button"),z.default.addClass(i,"save-as");var r=document.createElement("span");r.innerHTML="Revert",z.default.addClass(r,"button"),z.default.addClass(r,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?U.default.each(e.load.remembered,function(t,n){d(e,n,n===e.preset)}):d(e,Q,!1),z.default.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(r),q){var l=document.getElementById("dg-local-explain"),s=document.getElementById("dg-local-storage"),f=document.getElementById("dg-save-locally");f.style.display="block","true"===localStorage.getItem(u(e,"isLocal"))&&s.setAttribute("checked","checked"),c(e,l),z.default.bind(s,"change",function(){e.useLocalStorage=!e.useLocalStorage,c(e,l)})}var _=document.getElementById("dg-new-constructor");z.default.bind(_,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||Z.hide()}),z.default.bind(n,"click",function(){_.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),Z.show(),_.focus(),_.select()}),z.default.bind(o,"click",function(){e.save()}),z.default.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),z.default.bind(r,"click",function(){e.revert()})}function _(e){function t(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function n(){z.default.removeClass(e.__closeButton,oe.CLASS_DRAG),z.default.unbind(window,"mousemove",t),z.default.unbind(window,"mouseup",n)}function o(o){return o.preventDefault(),i=o.clientX,z.default.addClass(e.__closeButton,oe.CLASS_DRAG),z.default.bind(window,"mousemove",t),z.default.bind(window,"mouseup",n),!1}var i=void 0;e.__resize_handle=document.createElement("div"),U.default.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),z.default.bind(e.__resize_handle,"mousedown",o),z.default.bind(e.__closeButton,"mousedown",o),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function p(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function h(e,t){var n={};return U.default.each(e.__rememberedObjects,function(o,i){var r={},a=e.__rememberedObjectIndecesToControllers[i];U.default.each(a,function(e,n){r[n]=t?e.initialValue:e.getValue()}),n[i]=r}),n}function m(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function b(e){0!==e.length&&D.default.call(window,function(){b(e)}),U.default.each(e,function(e){e.updateDisplay()})}t.__esModule=!0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=n(18),y=o(v),w=n(19),x=o(w),E=n(20),C=o(E),A=n(7),S=o(A),k=n(8),O=o(k),T=n(15),R=o(T),L=n(13),B=o(L),M=n(14),N=o(M),H=n(16),j=o(H),P=n(21),D=o(P),V=n(22),F=o(V),I=n(9),z=o(I),G=n(5),U=o(G),X=n(23),K=o(X);y.default.inject(K.default);var Y="dg",J=72,W=20,Q="Default",q=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),Z=void 0,$=!0,ee=void 0,te=!1,ne=[],oe=function e(t){function n(){var e=o.getRoot();e.width+=1,U.default.defer(function(){e.width-=1})}var o=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),z.default.addClass(this.domElement,Y),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=U.default.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=U.default.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),U.default.isUndefined(r.load)?r.load={preset:Q}:r.preset&&(r.load.preset=r.preset),U.default.isUndefined(r.parent)&&r.hideable&&ne.push(this),r.resizable=U.default.isUndefined(r.parent)&&r.resizable,r.autoPlace&&U.default.isUndefined(r.scrollable)&&(r.scrollable=!0);var a=q&&"true"===localStorage.getItem(u(this,"isLocal")),l=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return o.parent?o.getRoot().preset:r.load.preset},set:function(e){o.parent?o.getRoot().preset=e:r.load.preset=e,m(this),o.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,p(o,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,titleRowName&&(titleRowName.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?z.default.addClass(o.__ul,e.CLASS_CLOSED):z.default.removeClass(o.__ul,e.CLASS_CLOSED),this.onResize(),o.__closeButton&&(o.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return a},set:function(e){q&&(a=e,e?z.default.bind(window,"unload",l):z.default.unbind(window,"unload",l),localStorage.setItem(u(o,"isLocal"),e))}}}),U.default.isUndefined(r.parent)){if(r.closed=!1,z.default.addClass(this.domElement,e.CLASS_MAIN),z.default.makeSelectable(this.domElement,!1),q&&a){o.useLocalStorage=!0;var s=localStorage.getItem(u(this,"gui"));s&&(r.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,z.default.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(z.default.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(z.default.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),z.default.bind(this.__closeButton,"click",function(){o.closed=!o.closed})}else{void 0===r.closed&&(r.closed=!0);var d=document.createTextNode(r.name);z.default.addClass(d,"controller-name");var c=i(o,d),f=function(e){return e.preventDefault(),o.closed=!o.closed,!1};z.default.addClass(this.__ul,e.CLASS_CLOSED),z.default.addClass(c,"title"),z.default.bind(c,"click",f),r.closed||(this.closed=!1)}r.autoPlace&&(U.default.isUndefined(r.parent)&&($&&(ee=document.createElement("div"),z.default.addClass(ee,Y),z.default.addClass(ee,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(ee),$=!1),ee.appendChild(this.domElement),z.default.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||p(o,r.width)),this.__resizeHandler=function(){o.onResizeDebounced()},z.default.bind(window,"resize",this.__resizeHandler),z.default.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),z.default.bind(this.__ul,"transitionend",this.__resizeHandler),z.default.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&_(this),l=function(){q&&"true"===localStorage.getItem(u(o,"isLocal"))&&localStorage.setItem(u(o,"gui"),JSON.stringify(o.getSaveObject()))},this.saveToLocalStorageIfPossible=l,r.parent||n()};oe.toggleHide=function(){te=!te,U.default.each(ne,function(e){e.domElement.style.display=te?"none":""})},oe.CLASS_AUTO_PLACE="a",oe.CLASS_AUTO_PLACE_CONTAINER="ac",oe.CLASS_MAIN="main",oe.CLASS_CONTROLLER_ROW="cr",oe.CLASS_TOO_TALL="taller-than-window",oe.CLASS_CLOSED="closed",oe.CLASS_CLOSE_BUTTON="close-button",oe.CLASS_CLOSE_TOP="close-top",oe.CLASS_CLOSE_BOTTOM="close-bottom",oe.CLASS_DRAG="drag",oe.DEFAULT_WIDTH=245,oe.TEXT_CLOSED="Close Controls",oe.TEXT_OPEN="Open Controls",oe._keydownHandler=function(e){"text"===document.activeElement.type||e.which!==J&&e.keyCode!==J||oe.toggleHide()},z.default.bind(window,"keydown",oe._keydownHandler,!1),U.default.extend(oe.prototype,{add:function(e,t){return s(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return s(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;U.default.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&ee.removeChild(this.domElement),z.default.unbind(window,"keydown",oe._keydownHandler,!1),z.default.unbind(window,"resize",this.__resizeHandler),this.saveToLocalStorageIfPossible&&z.default.unbind(window,"unload",this.saveToLocalStorageIfPossible)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error(\'You already have a folder in this GUI by the name "\'+e+\'"\');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new oe(t);this.__folders[e]=n;var o=i(this,n.domElement);return z.default.addClass(o,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=z.default.getOffset(e.__ul).top,n=0;U.default.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=z.default.getHeight(t))}),window.innerHeight-t-W<n?(z.default.addClass(e.domElement,oe.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-W+"px"):(z.default.removeClass(e.domElement,oe.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&U.default.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:U.default.debounce(function(){this.onResize()},50),remember:function(){if(U.default.isUndefined(Z)&&(Z=new F.default,Z.domElement.innerHTML=x.default),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;U.default.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&f(e),e.__rememberedObjects.indexOf(t)===-1&&e.__rememberedObjects.push(t)}),this.autoPlace&&p(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=h(this)),e.folders={},U.default.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=h(this),r(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[Q]=h(this,!0)),this.load.remembered[e]=h(this),this.preset=e,d(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){U.default.each(this.__controllers,function(t){this.getRoot().load.remembered?l(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),U.default.each(this.__folders,function(e){e.revert(e)}),e||r(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&b(this.__listening)},updateDisplay:function(){U.default.each(this.__controllers,function(e){e.updateDisplay()}),U.default.each(this.__folders,function(e){e.updateDisplay()})}}),t.default=oe,e.exports=t.default},function(e,t){"use strict";e.exports={load:function(e,t){var n=t||document,o=n.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=e,n.getElementsByTagName("head")[0].appendChild(o)},inject:function(e,t){var n=t||document,o=document.createElement("style");o.type="text/css",o.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(o)}catch(e){}}}},function(e,t){e.exports="<div id=dg-save class=\\"dg dialogue\\"> Here\'s the new load parameter for your <code>GUI</code>\'s constructor: <textarea id=dg-new-constructor></textarea> <div id=dg-save-locally> <input id=dg-local-storage type=checkbox /> Automatically save values to <code>localStorage</code> on exit. <div id=dg-local-explain>The values saved to <code>localStorage</code> will override those passed to <code>dat.GUI</code>\'s constructor. This makes it easier to work incrementally, but <code>localStorage</code> is fragile, and your friends may not see the same values you do. </div> </div> </div>"},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(10),r=o(i),a=n(13),l=o(a),s=n(14),u=o(s),d=n(11),c=o(d),f=n(15),_=o(f),p=n(8),h=o(p),m=n(5),b=o(m),g=function(e,t){var n=e[t];return b.default.isArray(arguments[2])||b.default.isObject(arguments[2])?new r.default(e,t,arguments[2]):b.default.isNumber(n)?b.default.isNumber(arguments[2])&&b.default.isNumber(arguments[3])?b.default.isNumber(arguments[4])?new u.default(e,t,arguments[2],arguments[3],arguments[4]):new u.default(e,t,arguments[2],arguments[3]):b.default.isNumber(arguments[4])?new l.default(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new l.default(e,t,{min:arguments[2],max:arguments[3]}):b.default.isString(n)?new c.default(e,t):b.default.isFunction(n)?new _.default(e,t,""):b.default.isBoolean(n)?new h.default(e,t):null};t.default=g,e.exports=t.default},function(e,t){"use strict";function n(e){setTimeout(e,1e3/60)}t.__esModule=!0,t.default=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||n,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=n(9),a=o(r),l=n(5),s=o(l),u=function(){function e(){i(this,e),this.backgroundElement=document.createElement("div"),s.default.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),a.default.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),s.default.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;a.default.bind(this.backgroundElement,"click",function(){t.hide()})}return e.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),s.default.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},e.prototype.hide=function e(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",a.default.unbind(t.domElement,"webkitTransitionEnd",e),a.default.unbind(t.domElement,"transitionend",e),a.default.unbind(t.domElement,"oTransitionEnd",e)};a.default.bind(this.domElement,"webkitTransitionEnd",e),a.default.bind(this.domElement,"transitionend",e),a.default.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},e.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-a.default.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-a.default.getHeight(this.domElement)/2+"px"},e}();t.default=u,e.exports=t.default},function(e,t,n){t=e.exports=n(24)(),t.push([e.id,".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1!important}.dg.main .close-button.drag,.dg.main:hover .close-button{opacity:1}.dg.main .close-button{transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{transition:height .1s ease-out;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid transparent}.dg li.title{margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.boolean,.dg .cr.boolean *,.dg .cr.function,.dg .cr.function *,.dg .cr.function .property-name{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco,monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px Lucida Grande,sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid hsla(0,0%,100%,.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.boolean:hover,.dg .cr.function:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}}])});\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/dat-gui.min.js\n// module id = 6\n// module chunks = 0\n\n//# sourceURL=webpack:///./lib/dat-gui.min.js?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nmodule.exports = Instruments\n\n\n\nfunction Instruments() {\n    var self = this\n\n    this.names = []\n    instNames.forEach(obj => this.names.push(obj.name))\n    drumNames.forEach(obj => this.names.push(obj.name))\n\n\n    this.getProg = function (name, quality) {\n        // find instrument name\n        var i = nameToIndex(name)\n        var drum = (i >= program0.length)\n        if (drum) i -= program0.length\n        var lists = (drum) ?\n            [drums0, drums1] :\n            [program0, program1]\n        var q = (quality) ? 1 : 0\n        return lists[q][i] || lists[0][i]\n    }\n\n    function nameToIndex(name) {\n        var ind = self.names.indexOf(name)\n        if (ind >= 0) return ind\n        name = name.toLowerCase()\n        for (var i = 0; i < self.names.length; i++) {\n            var loc = self.names[i].toLowerCase().indexOf(name)\n            if (loc >= 0) return i\n        }\n        return -1\n    }\n\n}\n\nvar instNames = [\n    // 1-8 : Piano\n    { name: "Acoustic Grand Piano" }, { name: "Bright Acoustic Piano" },\n    { name: "Electric Grand Piano" }, { name: "Honky-tonk Piano" },\n    { name: "Electric Piano 1" }, { name: "Electric Piano 2" },\n    { name: "Harpsichord" }, { name: "Clavi" },\n    /* 9-16 : Chromatic Perc*/\n    { name: "Celesta" }, { name: "Glockenspiel" },\n    { name: "Music Box" }, { name: "Vibraphone" },\n    { name: "Marimba" }, { name: "Xylophone" },\n    { name: "Tubular Bells" }, { name: "Dulcimer" },\n    /* 17-24 : Organ */\n    { name: "Drawbar Organ" }, { name: "Percussive Organ" },\n    { name: "Rock Organ" }, { name: "Church Organ" },\n    { name: "Reed Organ" }, { name: "Accordion" },\n    { name: "Harmonica" }, { name: "Tango Accordion" },\n    /* 25-32 : Guitar */\n    { name: "Acoustic Guitar (nylon)" }, { name: "Acoustic Guitar (steel)" },\n    { name: "Electric Guitar (jazz)" }, { name: "Electric Guitar (clean)" },\n    { name: "Electric Guitar (muted)" }, { name: "Overdriven Guitar" },\n    { name: "Distortion Guitar" }, { name: "Guitar harmonics" },\n    /* 33-40 : Bass */\n    { name: "Acoustic Bass" }, { name: "Electric Bass (finger)" },\n    { name: "Electric Bass (pick)" }, { name: "Fretless Bass" },\n    { name: "Slap Bass 1" }, { name: "Slap Bass 2" },\n    { name: "Synth Bass 1" }, { name: "Synth Bass 2" },\n    /* 41-48 : Strings */\n    { name: "Violin" }, { name: "Viola" },\n    { name: "Cello" }, { name: "Contrabass" },\n    { name: "Tremolo Strings" }, { name: "Pizzicato Strings" },\n    { name: "Orchestral Harp" }, { name: "Timpani" },\n    /* 49-56 : Ensamble */\n    { name: "String Ensemble 1" }, { name: "String Ensemble 2" },\n    { name: "SynthStrings 1" }, { name: "SynthStrings 2" },\n    { name: "Choir Aahs" }, { name: "Voice Oohs" },\n    { name: "Synth Voice" }, { name: "Orchestra Hit" },\n    /* 57-64 : Brass */\n    { name: "Trumpet" }, { name: "Trombone" },\n    { name: "Tuba" }, { name: "Muted Trumpet" },\n    { name: "French Horn" }, { name: "Brass Section" },\n    { name: "SynthBrass 1" }, { name: "SynthBrass 2" },\n    /* 65-72 : Reed */\n    { name: "Soprano Sax" }, { name: "Alto Sax" },\n    { name: "Tenor Sax" }, { name: "Baritone Sax" },\n    { name: "Oboe" }, { name: "English Horn" },\n    { name: "Bassoon" }, { name: "Clarinet" },\n    /* 73-80 : Pipe */\n    { name: "Piccolo" }, { name: "Flute" },\n    { name: "Recorder" }, { name: "Pan Flute" },\n    { name: "Blown Bottle" }, { name: "Shakuhachi" },\n    { name: "Whistle" }, { name: "Ocarina" },\n    /* 81-88 : SynthLead */\n    { name: "Lead 1 (square)" }, { name: "Lead 2 (sawtooth)" },\n    { name: "Lead 3 (calliope)" }, { name: "Lead 4 (chiff)" },\n    { name: "Lead 5 (charang)" }, { name: "Lead 6 (voice)" },\n    { name: "Lead 7 (fifths)" }, { name: "Lead 8 (bass + lead)" },\n    /* 89-96 : SynthPad */\n    { name: "Pad 1 (new age)" }, { name: "Pad 2 (warm)" },\n    { name: "Pad 3 (polysynth)" }, { name: "Pad 4 (choir)" },\n    { name: "Pad 5 (bowed)" }, { name: "Pad 6 (metallic)" },\n    { name: "Pad 7 (halo)" }, { name: "Pad 8 (sweep)" },\n    /* 97-104 : FX */\n    { name: "FX 1 (rain)" }, { name: "FX 2 (soundtrack)" },\n    { name: "FX 3 (crystal)" }, { name: "FX 4 (atmosphere)" },\n    { name: "FX 5 (brightness)" }, { name: "FX 6 (goblins)" },\n    { name: "FX 7 (echoes)" }, { name: "FX 8 (sci-fi)" },\n    /* 105-112 : Ethnic */\n    { name: "Sitar" }, { name: "Banjo" },\n    { name: "Shamisen" }, { name: "Koto" },\n    { name: "Kalimba" }, { name: "Bag pipe" },\n    { name: "Fiddle" }, { name: "Shanai" },\n    /* 113-120 : Percussive */\n    { name: "Tinkle Bell" }, { name: "Agogo" },\n    { name: "Steel Drums" }, { name: "Woodblock" },\n    { name: "Taiko Drum" }, { name: "Melodic Tom" },\n    { name: "Synth Drum" }, { name: "Reverse Cymbal" },\n    /* 121-128 : SE */\n    { name: "Guitar Fret Noise" }, { name: "Breath Noise" },\n    { name: "Seashore" }, { name: "Bird Tweet" },\n    { name: "Telephone Ring" }, { name: "Helicopter" },\n    { name: "Applause" }, { name: "Gunshot" },\n]\n\nvar drumNames = [\n    // 35\n    { name: "Acoustic Bass Drum" }, { name: "Bass Drum 1" }, { name: "Side Stick" }, { name: "Acoustic Snare" },\n    { name: "Hand Clap" }, { name: "Electric Snare" }, { name: "Low Floor Tom" }, { name: "Closed Hi Hat" },\n    { name: "High Floor Tom" }, { name: "Pedal Hi-Hat" }, { name: "Low Tom" }, { name: "Open Hi-Hat" },\n    { name: "Low-Mid Tom" }, { name: "Hi-Mid Tom" }, { name: "Crash Cymbal 1" }, { name: "High Tom" },\n    { name: "Ride Cymbal 1" }, { name: "Chinese Cymbal" }, { name: "Ride Bell" }, { name: "Tambourine" },\n    { name: "Splash Cymbal" }, { name: "Cowbell" }, { name: "Crash Cymbal 2" }, { name: "Vibraslap" },\n    { name: "Ride Cymbal 2" }, { name: "Hi Bongo" }, { name: "Low Bongo" }, { name: "Mute Hi Conga" },\n    { name: "Open Hi Conga" }, { name: "Low Conga" }, { name: "High Timbale" }, { name: "Low Timbale" },\n    { name: "High Agogo" }, { name: "Low Agogo" }, { name: "Cabasa" }, { name: "Maracas" },\n    { name: "Short Whistle" }, { name: "Long Whistle" }, { name: "Short Guiro" }, { name: "Long Guiro" },\n    { name: "Claves" }, { name: "Hi Wood Block" }, { name: "Low Wood Block" }, { name: "Mute Cuica" },\n    { name: "Open Cuica" }, { name: "Mute Triangle" }, { name: "Open Triangle" },\n]\n\n\n\n\nvar program1 = [\n    // 1-8 : Piano\n    [{ w: "sine", v: .4, d: 0.7, r: 0.1, }, { w: "triangle", v: 3, d: 0.7, s: 0.1, g: 1, a: 0.01, k: -1.2 }],\n    [{ w: "triangle", v: 0.4, d: 0.7, r: 0.1, }, { w: "triangle", v: 4, t: 3, d: 0.4, s: 0.1, g: 1, k: -1, a: 0.01, }],\n    [{ w: "sine", d: 0.7, r: 0.1, }, { w: "triangle", v: 4, f: 2, d: 0.5, s: 0.5, g: 1, k: -1 }],\n    [{ w: "sine", d: 0.7, v: 0.2, }, { w: "triangle", v: 4, t: 3, f: 2, d: 0.3, g: 1, k: -1, a: 0.01, s: 0.5, }],\n    [{ w: "sine", v: 0.35, d: 0.7, }, { w: "sine", v: 3, t: 7, f: 1, d: 1, s: 1, g: 1, k: -.7 }],\n    [{ w: "sine", v: 0.35, d: 0.7, }, { w: "sine", v: 8, t: 7, f: 1, d: 0.5, s: 1, g: 1, k: -.7 }],\n    [{ w: "sawtooth", v: 0.34, d: 2, }, { w: "sine", v: 8, f: 0.1, d: 2, s: 1, r: 2, g: 1, }],\n    [{ w: "triangle", v: 0.34, d: 1.5, }, { w: "square", v: 6, f: 0.1, d: 1.5, s: 0.5, r: 2, g: 1, }],\n    /* 9-16 : Chromatic Perc*/\n    [{ w: "sine", d: 0.3, r: 0.3, }, { w: "sine", v: 7, t: 11, d: 0.03, g: 1, }],\n    [{ w: "sine", d: 0.3, r: 0.3, }, { w: "sine", v: 11, t: 6, d: 0.2, s: 0.4, g: 1, }],\n    [{ w: "sine", v: 0.2, d: 0.3, r: 0.3, }, { w: "sine", v: 11, t: 5, d: 0.1, s: 0.4, g: 1, }],\n    [{ w: "sine", v: 0.2, d: 0.6, r: 0.6, }, { w: "triangle", v: 11, t: 5, f: 1, s: 0.5, g: 1, }],\n    [{ w: "sine", v: 0.3, d: 0.2, r: 0.2, }, { w: "sine", v: 6, t: 5, d: 0.02, g: 1, }],\n    [{ w: "sine", v: 0.3, d: 0.2, r: 0.2, }, { w: "sine", v: 7, t: 11, d: 0.03, g: 1, }],\n    [{ w: "sine", v: 0.2, d: 1, r: 1, }, { w: "sine", v: 11, t: 3.5, d: 1, r: 1, g: 1, }],\n    [{ w: "triangle", v: 0.2, d: 0.5, r: 0.2, }, { w: "sine", v: 6, t: 2.5, d: 0.2, s: 0.1, r: 0.2, g: 1, }],\n    /* 17-24 : Organ */\n    [{ w: "w9999", v: 0.22, s: 0.9, }, { w: "w9999", v: 0.22, t: 2, f: 2, s: 0.9, }],\n    [{ w: "w9999", v: 0.2, s: 1, }, { w: "sine", v: 11, t: 6, f: 2, s: 0.1, g: 1, h: 0.006, r: 0.002, d: 0.002, }, { w: "w9999", v: 0.2, t: 2, f: 1, h: 0, s: 1, }],\n    [{ w: "w9999", v: 0.2, d: 0.1, s: 0.9, }, { w: "w9999", v: 0.25, t: 4, f: 2, s: 0.5, }],\n    [{ w: "w9999", v: 0.3, a: 0.04, s: 0.9, }, { w: "w9999", v: 0.2, t: 8, f: 2, a: 0.04, s: 0.9, }],\n    [{ w: "sine", v: 0.2, a: 0.02, d: 0.05, s: 1, }, { w: "sine", v: 6, t: 3, f: 1, a: 0.02, d: 0.05, s: 1, g: 1, }],\n    [{ w: "triangle", v: 0.2, a: 0.02, d: 0.05, s: 0.8, }, { w: "square", v: 7, t: 3, f: 1, d: 0.05, s: 1.5, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.02, d: 0.2, s: 0.5, }, { w: "square", v: 1, d: 0.03, s: 2, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.02, d: 0.1, s: 0.8, }, { w: "square", v: 1, a: 0.3, d: 0.1, s: 2, g: 1, }],\n    /* 25-32 : Guitar */\n    [{ w: "sine", v: 0.3, d: 0.5, f: 1, }, { w: "triangle", v: 5, t: 3, f: -1, d: 1, s: 0.1, g: 1, }],\n    [{ w: "sine", v: 0.4, d: 0.6, f: 1, }, { w: "triangle", v: 12, t: 3, d: 0.6, s: 0.1, g: 1, f: -1, }],\n    [{ w: "triangle", v: 0.3, d: 1, f: 1, }, { w: "triangle", v: 6, f: -1, d: 0.4, s: 0.5, g: 1, t: 3, }],\n    [{ w: "sine", v: 0.3, d: 1, f: -1, }, { w: "triangle", v: 11, f: 1, d: 0.4, s: 0.5, g: 1, t: 3, }],\n    [{ w: "sine", v: 0.4, d: 0.1, r: 0.01 }, { w: "sine", v: 7, g: 1, }],\n    [{ w: "triangle", v: 0.4, d: 1, f: 1, }, { w: "square", v: 4, f: -1, d: 1, s: 0.7, g: 1, }],//[{w:"triangle",v:0.35,d:1,f:1,},{w:"square",v:7,f:-1,d:0.3,s:0.5,g:1,}],\n    [{ w: "triangle", v: 0.35, d: 1, f: 1, }, { w: "square", v: 7, f: -1, d: 0.3, s: 0.5, g: 1, }],//[{w:"triangle",v:0.4,d:1,f:1,},{w:"square",v:4,f:-1,d:1,s:0.7,g:1,}],//[{w:"triangle",v:0.4,d:1,},{w:"square",v:4,f:2,d:1,s:0.7,g:1,}],\n    [{ w: "sine", v: 0.2, t: 1.5, a: 0.005, h: 0.2, d: 0.6, }, { w: "sine", v: 11, t: 5, f: 2, d: 1, s: 0.5, g: 1, }],\n    /* 33-40 : Bass */\n    [{ w: "sine", d: 0.3, }, { w: "sine", v: 4, t: 3, d: 1, s: 1, g: 1, }],\n    [{ w: "sine", d: 0.3, }, { w: "sine", v: 4, t: 3, d: 1, s: 1, g: 1, }],\n    [{ w: "w9999", d: 0.3, v: 0.7, s: 0.5, }, { w: "sawtooth", v: 1.2, d: 0.02, s: 0.5, g: 1, h: 0, r: 0.02, }],\n    [{ w: "sine", d: 0.3, }, { w: "sine", v: 4, t: 3, d: 1, s: 1, g: 1, }],\n    [{ w: "triangle", v: 0.3, t: 2, d: 1, }, { w: "triangle", v: 15, t: 2.5, d: 0.04, s: 0.1, g: 1, }],\n    [{ w: "triangle", v: 0.3, t: 2, d: 1, }, { w: "triangle", v: 15, t: 2.5, d: 0.04, s: 0.1, g: 1, }],\n    [{ w: "triangle", d: 0.7, }, { w: "square", v: 0.4, t: 0.5, f: 1, d: 0.2, s: 10, g: 1, }],\n    [{ w: "triangle", d: 0.7, }, { w: "square", v: 0.4, t: 0.5, f: 1, d: 0.2, s: 10, g: 1, }],\n    /* 41-48 : Strings */\n    [{ w: "sawtooth", v: 0.4, a: 0.1, d: 11, }, { w: "sine", v: 5, d: 11, s: 0.2, g: 1, }],\n    [{ w: "sawtooth", v: 0.4, a: 0.1, d: 11, }, { w: "sine", v: 5, d: 11, s: 0.2, g: 1, }],\n    [{ w: "sawtooth", v: 0.4, a: 0.1, d: 11, }, { w: "sine", v: 5, t: 0.5, d: 11, s: 0.2, g: 1, }],\n    [{ w: "sawtooth", v: 0.4, a: 0.1, d: 11, }, { w: "sine", v: 5, t: 0.5, d: 11, s: 0.2, g: 1, }],\n    [{ w: "sine", v: 0.4, a: 0.1, d: 11, }, { w: "sine", v: 6, f: 2.5, d: 0.05, s: 1.1, g: 1, }],\n    [{ w: "sine", v: 0.3, d: 0.1, r: 0.1, }, { w: "square", v: 4, t: 3, d: 1, s: 0.2, g: 1, }],\n    [{ w: "sine", v: 0.3, d: 0.5, r: 0.5, }, { w: "sine", v: 7, t: 2, f: 2, d: 1, r: 1, g: 1, }],\n    [{ w: "triangle", v: 0.6, h: 0.03, d: 0.3, r: 0.3, t: 0.5, }, { w: "n0", v: 8, t: 1.5, d: 0.08, r: 0.08, g: 1, }],\n    /* 49-56 : Ensamble */\n    [{ w: "sawtooth", v: 0.3, a: 0.03, s: 0.5, }, { w: "sawtooth", v: 0.2, t: 2, f: 2, d: 1, s: 2, }],\n    [{ w: "sawtooth", v: 0.3, f: -2, a: 0.03, s: 0.5, }, { w: "sawtooth", v: 0.2, t: 2, f: 2, d: 1, s: 2, }],\n    [{ w: "sawtooth", v: 0.2, a: 0.02, s: 1, }, { w: "sawtooth", v: 0.2, t: 2, f: 2, a: 1, d: 1, s: 1, }],\n    [{ w: "sawtooth", v: 0.2, a: 0.02, s: 1, }, { w: "sawtooth", v: 0.2, f: 2, a: 0.02, d: 1, s: 1, }],\n    [{ w: "triangle", v: 0.3, a: 0.03, s: 1, }, { w: "sine", v: 3, t: 5, f: 1, d: 1, s: 1, g: 1, }],\n    [{ w: "sine", v: 0.4, a: 0.03, s: 0.9, }, { w: "sine", v: 1, t: 2, f: 3, d: 0.03, s: 0.2, g: 1, }],\n    [{ w: "triangle", v: 0.6, a: 0.05, s: 0.5, }, { w: "sine", v: 1, f: 0.8, d: 0.2, s: 0.2, g: 1, }],\n    [{ w: "square", v: 0.15, a: 0.01, d: 0.2, r: 0.2, t: 0.5, h: 0.03, }, { w: "square", v: 4, f: 0.5, d: 0.2, r: 11, a: 0.01, g: 1, h: 0.02, }, { w: "square", v: 0.15, t: 4, f: 1, a: 0.02, d: 0.15, r: 0.15, h: 0.03, }, { g: 3, w: "square", v: 4, f: -0.5, a: 0.01, h: 0.02, d: 0.15, r: 11, }],\n    /* 57-64 : Brass */\n    [{ w: "square", v: 0.2, a: 0.01, d: 1, s: 0.6, r: 0.04, }, { w: "sine", v: 1, d: 0.1, s: 4, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.02, d: 1, s: 0.5, r: 0.08, }, { w: "sine", v: 1, d: 0.1, s: 4, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.04, d: 1, s: 0.4, r: 0.08, }, { w: "sine", v: 1, d: 0.1, s: 4, g: 1, }],\n    [{ w: "square", v: 0.15, a: 0.04, s: 1, }, { w: "sine", v: 2, d: 0.1, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.02, d: 1, s: 0.5, r: 0.08, }, { w: "sine", v: 1, d: 0.1, s: 4, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.02, d: 1, s: 0.6, r: 0.08, }, { w: "sine", v: 1, f: 0.2, d: 0.1, s: 4, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.02, d: 0.5, s: 0.7, r: 0.08, }, { w: "sine", v: 1, d: 0.1, s: 4, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.02, d: 1, s: 0.5, r: 0.08, }, { w: "sine", v: 1, d: 0.1, s: 4, g: 1, }],\n    /* 65-72 : Reed */\n    [{ w: "square", v: 0.2, a: 0.02, d: 2, s: 0.6, }, { w: "sine", v: 2, d: 1, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.02, d: 2, s: 0.6, }, { w: "sine", v: 2, d: 1, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.02, d: 1, s: 0.6, }, { w: "sine", v: 2, d: 1, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.02, d: 1, s: 0.6, }, { w: "sine", v: 2, d: 1, g: 1, }],\n    [{ w: "sine", v: 0.4, a: 0.02, d: 0.7, s: 0.5, }, { w: "square", v: 5, t: 2, d: 0.2, s: 0.5, g: 1, }],\n    [{ w: "sine", v: 0.3, a: 0.05, d: 0.2, s: 0.8, }, { w: "sawtooth", v: 6, f: 0.1, d: 0.1, s: 0.3, g: 1, }],\n    [{ w: "sine", v: 0.3, a: 0.03, d: 0.2, s: 0.4, }, { w: "square", v: 7, f: 0.2, d: 1, s: 0.1, g: 1, }],\n    [{ w: "square", v: 0.2, a: 0.05, d: 0.1, s: 0.8, }, { w: "square", v: 4, d: 0.1, s: 1.1, g: 1, }],\n    /* 73-80 : Pipe */\n    [{ w: "sine", a: 0.02, d: 2, }, { w: "sine", v: 6, t: 2, d: 0.04, g: 1, }],\n    [{ w: "sine", v: 0.7, a: 0.03, d: 0.4, s: 0.4, }, { w: "sine", v: 4, t: 2, f: 0.2, d: 0.4, g: 1, }],\n    [{ w: "sine", v: 0.7, a: 0.02, d: 0.4, s: 0.6, }, { w: "sine", v: 3, t: 2, d: 0, s: 1, g: 1, }],\n    [{ w: "sine", v: 0.4, a: 0.06, d: 0.3, s: 0.3, }, { w: "sine", v: 7, t: 2, d: 0.2, s: 0.2, g: 1, }],\n    [{ w: "sine", a: 0.02, d: 0.3, s: 0.3, }, { w: "sawtooth", v: 3, t: 2, d: 0.3, g: 1, }],\n    [{ w: "sine", v: 0.4, a: 0.02, d: 2, s: 0.1, }, { w: "sawtooth", v: 8, t: 2, f: 1, d: 0.5, g: 1, }],\n    [{ w: "sine", v: 0.7, a: 0.03, d: 0.5, s: 0.3, }, { w: "sine", v: 0.003, t: 0, f: 4, d: 0.1, s: 0.002, g: 1, }],\n    [{ w: "sine", v: 0.7, a: 0.02, d: 2, }, { w: "sine", v: 1, t: 2, f: 1, d: 0.02, g: 1, }],\n    /* 81-88 : SynthLead */\n    [{ w: "square", v: 0.3, d: 1, s: 0.5, }, { w: "square", v: 1, f: 0.2, d: 1, s: 0.5, g: 1, }],\n    [{ w: "sawtooth", v: 0.3, d: 2, s: 0.5, }, { w: "square", v: 2, f: 0.1, s: 0.5, g: 1, }],\n    [{ w: "triangle", v: 0.5, a: 0.05, d: 2, s: 0.6, }, { w: "sine", v: 4, t: 2, g: 1, }],\n    [{ w: "triangle", v: 0.3, a: 0.01, d: 2, s: 0.3, }, { w: "sine", v: 22, t: 2, f: 1, d: 0.03, s: 0.2, g: 1, }],\n    [{ w: "sawtooth", v: 0.3, d: 1, s: 0.5, }, { w: "sine", v: 11, t: 11, a: 0.2, d: 0.05, s: 0.3, g: 1, }],\n    [{ w: "sine", v: 0.3, a: 0.06, d: 1, s: 0.5, }, { w: "sine", v: 7, f: 1, d: 1, s: 0.2, g: 1, }],\n    [{ w: "sawtooth", v: 0.3, a: 0.03, d: 0.7, s: 0.3, r: 0.2, }, { w: "sawtooth", v: 0.3, t: 0.75, d: 0.7, a: 0.1, s: 0.3, r: 0.2, }],\n    [{ w: "triangle", v: 0.3, a: 0.01, d: 0.7, s: 0.5, }, { w: "square", v: 5, t: 0.5, d: 0.7, s: 0.5, g: 1, }],\n    /* 89-96 : SynthPad */\n    [{ w: "triangle", v: 0.3, a: 0.02, d: 0.3, s: 0.3, r: 0.3, }, { w: "square", v: 3, t: 4, f: 1, a: 0.02, d: 0.1, s: 1, g: 1, }, { w: "triangle", v: 0.08, t: 0.5, a: 0.1, h: 0, d: 0.1, s: 0.5, r: 0.1, b: 0, c: 0, }],\n    [{ w: "sine", v: 0.3, a: 0.05, d: 1, s: 0.7, r: 0.3, }, { w: "sine", v: 2, f: 1, d: 0.3, s: 1, g: 1, }],\n    [{ w: "square", v: 0.3, a: 0.03, d: 0.5, s: 0.3, r: 0.1, }, { w: "square", v: 4, f: 1, a: 0.03, d: 0.1, g: 1, }],\n    [{ w: "triangle", v: 0.3, a: 0.08, d: 1, s: 0.3, r: 0.1, }, { w: "square", v: 2, f: 1, d: 0.3, s: 0.3, g: 1, t: 4, a: 0.08, }],\n    [{ w: "sine", v: 0.3, a: 0.05, d: 1, s: 0.3, r: 0.1, }, { w: "sine", v: 0.1, t: 2.001, f: 1, d: 1, s: 50, g: 1, }],\n    [{ w: "triangle", v: 0.3, a: 0.03, d: 0.7, s: 0.3, r: 0.2, }, { w: "sine", v: 12, t: 7, f: 1, d: 0.5, s: 1.7, g: 1, }],\n    [{ w: "sine", v: 0.3, a: 0.05, d: 1, s: 0.3, r: 0.1, }, { w: "sawtooth", v: 22, t: 6, d: 0.06, s: 0.3, g: 1, }],\n    [{ w: "triangle", v: 0.3, a: 0.05, d: 11, r: 0.3, }, { w: "triangle", v: 1, d: 1, s: 8, g: 1, }],\n    /* 97-104 : FX */\n    [{ w: "sawtooth", v: 0.3, d: 4, s: 0.8, r: 0.1, }, { w: "square", v: 1, t: 2, f: 8, a: 1, d: 1, s: 1, r: 0.1, g: 1, }],\n    [{ w: "triangle", v: 0.3, d: 1, s: 0.5, t: 0.8, a: 0.2, p: 1.25, q: 0.2, }, { w: "sawtooth", v: 0.2, a: 0.2, d: 0.3, s: 1, t: 1.2, p: 1.25, q: 0.2, }],\n    [{ w: "sine", v: 0.3, d: 1, s: 0.3, }, { w: "square", v: 22, t: 11, d: 0.5, s: 0.1, g: 1, }],\n    [{ w: "sawtooth", v: 0.3, a: 0.04, d: 1, s: 0.8, r: 0.1, }, { w: "square", v: 1, t: 0.5, d: 1, s: 2, g: 1, }],\n    [{ w: "triangle", v: 0.3, d: 1, s: 0.3, }, { w: "sine", v: 22, t: 6, d: 0.6, s: 0.05, g: 1, }],\n    [{ w: "sine", v: 0.6, a: 0.1, d: 0.05, s: 0.4, }, { w: "sine", v: 5, t: 5, f: 1, d: 0.05, s: 0.3, g: 1, }],\n    [{ w: "sine", a: 0.1, d: 0.05, s: 0.4, v: 0.8, }, { w: "sine", v: 5, t: 5, f: 1, d: 0.05, s: 0.3, g: 1, }],\n    [{ w: "square", v: 0.3, a: 0.1, d: 0.1, s: 0.4, }, { w: "square", v: 1, f: 1, d: 0.3, s: 0.1, g: 1, }],\n    /* 105-112 : Ethnic */\n    [{ w: "sawtooth", v: 0.3, d: 0.5, r: 0.5, }, { w: "sawtooth", v: 11, t: 5, d: 0.05, g: 1, }],\n    [{ w: "square", v: 0.3, d: 0.2, r: 0.2, }, { w: "square", v: 7, t: 3, d: 0.05, g: 1, }],\n    [{ w: "triangle", d: 0.2, r: 0.2, }, { w: "square", v: 9, t: 3, d: 0.1, r: 0.1, g: 1, }],\n    [{ w: "triangle", d: 0.3, r: 0.3, }, { w: "square", v: 6, t: 3, d: 1, r: 1, g: 1, }],\n    [{ w: "triangle", v: 0.4, d: 0.2, r: 0.2, }, { w: "square", v: 22, t: 12, d: 0.1, r: 0.1, g: 1, }],\n    [{ w: "sine", v: 0.25, a: 0.02, d: 0.05, s: 0.8, }, { w: "square", v: 1, t: 2, d: 0.03, s: 11, g: 1, }],\n    [{ w: "sine", v: 0.3, a: 0.05, d: 11, }, { w: "square", v: 7, t: 3, f: 1, s: 0.7, g: 1, }],\n    [{ w: "square", v: 0.3, a: 0.05, d: 0.1, s: 0.8, }, { w: "square", v: 4, d: 0.1, s: 1.1, g: 1, }],\n    /* 113-120 : Percussive */\n    [{ w: "sine", v: 0.4, d: 0.3, r: 0.3, }, { w: "sine", v: 7, t: 9, d: 0.1, r: 0.1, g: 1, }],\n    [{ w: "sine", v: 0.7, d: 0.1, r: 0.1, }, { w: "sine", v: 22, t: 7, d: 0.05, g: 1, }],\n    [{ w: "sine", v: 0.6, d: 0.15, r: 0.15, }, { w: "square", v: 11, t: 3.2, d: 0.1, r: 0.1, g: 1, }],\n    [{ w: "sine", v: 0.8, d: 0.07, r: 0.07, }, { w: "square", v: 11, t: 7, r: 0.01, g: 1, }],\n    [{ w: "triangle", v: 0.7, t: 0.5, d: 0.2, r: 0.2, p: 0.95, }, { w: "n0", v: 9, g: 1, d: 0.2, r: 0.2, }],\n    [{ w: "sine", v: 0.7, d: 0.1, r: 0.1, p: 0.9, }, { w: "square", v: 14, t: 2, d: 0.005, r: 0.005, g: 1, }],\n    [{ w: "square", d: 0.15, r: 0.15, p: 0.5, }, { w: "square", v: 4, t: 5, d: 0.001, r: 0.001, g: 1, }],\n    [{ w: "n1", v: 0.3, a: 1, s: 1, d: 0.15, r: 0, t: 0.5, }],\n    /* 121-128 : SE */\n    [{ w: "sine", t: 12.5, d: 0, r: 0, p: 0.5, v: 0.3, h: 0.2, q: 0.5, }, { g: 1, w: "sine", v: 1, t: 2, d: 0, r: 0, s: 1, }, { g: 1, w: "n0", v: 0.2, t: 2, a: 0.6, h: 0, d: 0.1, r: 0.1, b: 0, c: 0, }],\n    [{ w: "n0", v: 0.2, a: 0.05, h: 0.02, d: 0.02, r: 0.02, }],\n    [{ w: "n0", v: 0.4, a: 1, d: 1, t: 0.25, }],\n    [{ w: "sine", v: 0.3, a: 0.1, d: 1, s: 0.5, }, { w: "sine", v: 4, t: 0, f: 1.5, d: 1, s: 1, r: 0.1, g: 1, }, { g: 1, w: "sine", v: 4, t: 0, f: 2, a: 0.6, h: 0, d: 0.1, s: 1, r: 0.1, b: 0, c: 0, }],\n    [{ w: "square", v: 0.3, t: 0.25, d: 11, s: 1, }, { w: "square", v: 12, t: 0, f: 8, d: 1, s: 1, r: 11, g: 1, }],\n    [{ w: "n0", v: 0.4, t: 0.5, a: 1, d: 11, s: 1, r: 0.5, }, { w: "square", v: 1, t: 0, f: 14, d: 1, s: 1, r: 11, g: 1, }],\n    [{ w: "sine", t: 0, f: 1221, a: 0.2, d: 1, r: 0.25, s: 1, }, { g: 1, w: "n0", v: 3, t: 0.5, d: 1, s: 1, r: 1, }],\n    [{ w: "sine", d: 0.4, r: 0.4, p: 0.1, t: 2.5, v: 1, }, { w: "n0", v: 12, t: 2, d: 1, r: 1, g: 1, }],\n]\n\nvar program0 = [\n    // 1-8 : Piano\n    [{ w: "triangle", v: .5, d: .7 }], [{ w: "triangle", v: .5, d: .7 }],\n    [{ w: "triangle", v: .5, d: .7 }], [{ w: "triangle", v: .5, d: .7 }],\n    [{ w: "triangle", v: .5, d: .7 }], [{ w: "triangle", v: .5, d: .7 }],\n    [{ w: "sawtooth", v: .3, d: .7 }], [{ w: "sawtooth", v: .3, d: .7 }],\n    /* 9-16 : Chromatic Perc*/\n    [{ w: "sine", v: .5, d: .3, r: .3 }], [{ w: "triangle", v: .5, d: .3, r: .3 }],\n    [{ w: "square", v: .2, d: .3, r: .3 }], [{ w: "square", v: .2, d: .3, r: .3 }],\n    [{ w: "sine", v: .5, d: .1, r: .1 }], [{ w: "sine", v: .5, d: .1, r: .1 }],\n    [{ w: "square", v: .2, d: 1, r: 1 }], [{ w: "sawtooth", v: .3, d: .7, r: .7 }],\n    /* 17-24 : Organ */\n    [{ w: "sine", v: 0.5, a: 0.01, s: 1 }], [{ w: "sine", v: 0.7, d: 0.02, s: 0.7 }],\n    [{ w: "square", v: .2, s: 1 }], [{ w: "triangle", v: .5, a: .01, s: 1 }],\n    [{ w: "square", v: .2, a: .02, s: 1 }], [{ w: "square", v: 0.2, a: 0.02, s: 1 }],\n    [{ w: "square", v: 0.2, a: 0.02, s: 1 }], [{ w: "square", v: .2, a: .05, s: 1 }],\n    /* 25-32 : Guitar */\n    [{ w: "triangle", v: .5, d: .5 }], [{ w: "square", v: .2, d: .6 }],\n    [{ w: "square", v: .2, d: .6 }], [{ w: "triangle", v: .8, d: .6 }],\n    [{ w: "triangle", v: .4, d: .05 }], [{ w: "square", v: .2, d: 1 }],\n    [{ w: "square", v: .2, d: 1 }], [{ w: "sine", v: .4, d: .6 }],\n    /* 33-40 : Bass */\n    [{ w: "triangle", v: .7, d: .4 }], [{ w: "triangle", v: .7, d: .7 }],\n    [{ w: "triangle", v: .7, d: .7 }], [{ w: "triangle", v: .7, d: .7 }],\n    [{ w: "square", v: .3, d: .2 }], [{ w: "square", v: .3, d: .2 }],\n    [{ w: "square", v: .3, d: .1, s: .2 }], [{ w: "sawtooth", v: .4, d: .1, s: .2 }],\n    /* 41-48 : Strings */\n    [{ w: "sawtooth", v: .2, a: .02, s: 1 }], [{ w: "sawtooth", v: .2, a: .02, s: 1 }],\n    [{ w: "sawtooth", v: .2, a: .02, s: 1 }], [{ w: "sawtooth", v: .2, a: .02, s: 1 }],\n    [{ w: "sawtooth", v: .2, a: .02, s: 1 }], [{ w: "sawtooth", v: .3, d: .1 }],\n    [{ w: "sawtooth", v: .3, d: .5, r: .5 }], [{ w: "triangle", v: .6, d: .1, r: .1, h: 0.03, p: 0.8 }],\n    /* 49-56 : Ensamble */\n    [{ w: "sawtooth", v: .2, a: .02, s: 1 }], [{ w: "sawtooth", v: .2, a: .02, s: 1 }],\n    [{ w: "sawtooth", v: .2, a: .02, s: 1 }], [{ w: "sawtooth", v: .2, a: .02, s: 1 }],\n    [{ w: "triangle", v: .3, a: .03, s: 1 }], [{ w: "sine", v: .3, a: .03, s: 1 }],\n    [{ w: "triangle", v: .3, a: .05, s: 1 }], [{ w: "sawtooth", v: .5, a: .01, d: .1 }],\n    /* 57-64 : Brass */\n    [{ w: "square", v: .3, a: .05, d: .2, s: .6 }], [{ w: "square", v: .3, a: .05, d: .2, s: .6 }],\n    [{ w: "square", v: .3, a: .05, d: .2, s: .6 }], [{ w: "square", v: 0.2, a: .05, d: 0.01, s: 1 }],\n    [{ w: "square", v: .3, a: .05, s: 1 }], [{ w: "square", v: .3, s: .7 }],\n    [{ w: "square", v: .3, s: .7 }], [{ w: "square", v: .3, s: .7 }],\n    /* 65-72 : Reed */\n    [{ w: "square", v: .3, a: .02, d: 2 }], [{ w: "square", v: .3, a: .02, d: 2 }],\n    [{ w: "square", v: .3, a: .03, d: 2 }], [{ w: "square", v: .3, a: .04, d: 2 }],\n    [{ w: "square", v: .3, a: .02, d: 2 }], [{ w: "square", v: .3, a: .05, d: 2 }],\n    [{ w: "square", v: .3, a: .03, d: 2 }], [{ w: "square", v: .3, a: .03, d: 2 }],\n    /* 73-80 : Pipe */\n    [{ w: "sine", v: .7, a: .02, d: 2 }], [{ w: "sine", v: .7, a: .02, d: 2 }],\n    [{ w: "sine", v: .7, a: .02, d: 2 }], [{ w: "sine", v: .7, a: .02, d: 2 }],\n    [{ w: "sine", v: .7, a: .02, d: 2 }], [{ w: "sine", v: .7, a: .02, d: 2 }],\n    [{ w: "sine", v: .7, a: .02, d: 2 }], [{ w: "sine", v: .7, a: .02, d: 2 }],\n    /* 81-88 : SynthLead */\n    [{ w: "square", v: .3, s: .7 }], [{ w: "sawtooth", v: .4, s: .7 }],\n    [{ w: "triangle", v: .5, s: .7 }], [{ w: "sawtooth", v: .4, s: .7 }],\n    [{ w: "sawtooth", v: .4, d: 12 }], [{ w: "sine", v: .4, a: .06, d: 12 }],\n    [{ w: "sawtooth", v: .4, d: 12 }], [{ w: "sawtooth", v: .4, d: 12 }],\n    /* 89-96 : SynthPad */\n    [{ w: "sawtooth", v: .3, d: 12 }], [{ w: "triangle", v: .5, d: 12 }],\n    [{ w: "square", v: .3, d: 12 }], [{ w: "triangle", v: .5, a: .08, d: 11 }],\n    [{ w: "sawtooth", v: .5, a: .05, d: 11 }], [{ w: "sawtooth", v: .5, d: 11 }],\n    [{ w: "triangle", v: .5, d: 11 }], [{ w: "triangle", v: .5, d: 11 }],\n    /* 97-104 : FX */\n    [{ w: "triangle", v: .5, d: 11 }], [{ w: "triangle", v: .5, d: 11 }],\n    [{ w: "square", v: .3, d: 11 }], [{ w: "sawtooth", v: 0.5, a: 0.04, d: 11 }],\n    [{ w: "sawtooth", v: .5, d: 11 }], [{ w: "triangle", v: .5, a: .8, d: 11 }],\n    [{ w: "triangle", v: .5, d: 11 }], [{ w: "square", v: .3, d: 11 }],\n    /* 105-112 : Ethnic */\n    [{ w: "sawtooth", v: .3, d: 1, r: 1 }], [{ w: "sawtooth", v: .5, d: .3 }],\n    [{ w: "sawtooth", v: .5, d: .3, r: .3 }], [{ w: "sawtooth", v: .5, d: .3, r: .3 }],\n    [{ w: "square", v: .3, d: .2, r: .2 }], [{ w: "square", v: .3, a: .02, d: 2 }],\n    [{ w: "sawtooth", v: .2, a: .02, d: .7 }], [{ w: "triangle", v: .5, d: 1 }],\n    /* 113-120 : Percussive */\n    [{ w: "sawtooth", v: .3, d: .3, r: .3 }], [{ w: "sine", v: .8, d: .1, r: .1 }],\n    [{ w: "square", v: .2, d: .1, r: .1, p: 1.05 }], [{ w: "sine", v: .8, d: .05, r: .05 }],\n    [{ w: "triangle", v: 0.5, d: 0.1, r: 0.1, p: 0.96 }], [{ w: "triangle", v: 0.5, d: 0.1, r: 0.1, p: 0.97 }],\n    [{ w: "square", v: .3, d: .1, r: .1, }], [{ w: "n1", v: 0.3, a: 1, s: 1, d: 0.15, r: 0, t: 0.5, }],\n    /* 121-128 : SE */\n    [{ w: "triangle", v: 0.5, d: 0.03, t: 0, f: 1332, r: 0.001, p: 1.1 }],\n    [{ w: "n0", v: 0.2, t: 0.1, d: 0.02, a: 0.05, h: 0.02, r: 0.02 }],\n    [{ w: "n0", v: 0.4, a: 1, d: 1, t: 0.25, }],\n    [{ w: "sine", v: 0.3, a: 0.8, d: 1, t: 0, f: 1832 }],\n    [{ w: "triangle", d: 0.5, t: 0, f: 444, s: 1, }],\n    [{ w: "n0", v: 0.4, d: 1, t: 0, f: 22, s: 1, }],\n    [{ w: "n0", v: 0.5, a: 0.2, d: 11, t: 0, f: 44 }],\n    [{ w: "n0", v: 0.5, t: 0.25, d: 0.4, r: 0.4 }],\n]\n\nvar drums1 = [\n/*35*/[{ w: "triangle", t: 0, f: 70, v: 1, d: 0.05, h: 0.03, p: 0.9, q: 0.1, }, { w: "n0", g: 1, t: 6, v: 17, r: 0.01, h: 0, p: 0, }],\n    [{ w: "triangle", t: 0, f: 88, v: 1, d: 0.05, h: 0.03, p: 0.5, q: 0.1, }, { w: "n0", g: 1, t: 5, v: 42, r: 0.01, h: 0, p: 0, }],\n    [{ w: "n0", f: 222, p: 0, t: 0, r: 0.01, h: 0, }],\n    [{ w: "triangle", v: 0.3, f: 180, d: 0.05, t: 0, h: 0.03, p: 0.9, q: 0.1, }, { w: "n0", v: 0.6, t: 0, f: 70, h: 0.02, r: 0.01, p: 0, }, { g: 1, w: "square", v: 2, t: 0, f: 360, r: 0.01, b: 0, c: 0, }],\n    [{ w: "square", f: 1150, v: 0.34, t: 0, r: 0.03, h: 0.025, d: 0.03, }, { g: 1, w: "n0", t: 0, f: 13, h: 0.025, d: 0.1, s: 1, r: 0.1, v: 1, }],\n/*40*/[{ w: "triangle", f: 200, v: 1, d: 0.06, t: 0, r: 0.06, }, { w: "n0", g: 1, t: 0, f: 400, v: 12, r: 0.02, d: 0.02, }],\n    [{ w: "triangle", f: 100, v: 0.9, d: 0.12, h: 0.02, p: 0.5, t: 0, r: 0.12, }, { g: 1, w: "n0", v: 5, t: 0.4, h: 0.015, d: 0.005, r: 0.005, }],\n    [{ w: "n1", f: 390, v: 0.25, r: 0.01, t: 0, }],\n    [{ w: "triangle", f: 120, v: 0.9, d: 0.12, h: 0.02, p: 0.5, t: 0, r: 0.12, }, { g: 1, w: "n0", v: 5, t: 0.5, h: 0.015, d: 0.005, r: 0.005, }],\n    [{ w: "n1", v: 0.25, f: 390, r: 0.03, t: 0, h: 0.005, d: 0.03, }],\n/*45*/[{ w: "triangle", f: 140, v: 0.9, d: 0.12, h: 0.02, p: 0.5, t: 0, r: 0.12, }, { g: 1, w: "n0", v: 5, t: 0.3, h: 0.015, d: 0.005, r: 0.005, }],\n    [{ w: "n1", v: 0.25, f: 390, t: 0, d: 0.2, r: 0.2, }, { w: "n0", v: 0.3, t: 0, c: 0, f: 440, h: 0.005, d: 0.05, }],\n    [{ w: "triangle", f: 155, v: 0.9, d: 0.12, h: 0.02, p: 0.5, t: 0, r: 0.12, }, { g: 1, w: "n0", v: 5, t: 0.3, h: 0.015, d: 0.005, r: 0.005, }],\n    [{ w: "triangle", f: 180, v: 0.9, d: 0.12, h: 0.02, p: 0.5, t: 0, r: 0.12, }, { g: 1, w: "n0", v: 5, t: 0.3, h: 0.015, d: 0.005, r: 0.005, }],\n    [{ w: "n1", v: 0.3, f: 1200, d: 0.2, r: 0.2, h: 0.05, t: 0, }, { w: "n1", t: 0, v: 1, d: 0.1, r: 0.1, p: 1.2, f: 440, }],\n/*50*/[{ w: "triangle", f: 220, v: 0.9, d: 0.12, h: 0.02, p: 0.5, t: 0, r: 0.12, }, { g: 1, w: "n0", v: 5, t: 0.3, h: 0.015, d: 0.005, r: 0.005, }],\n    [{ w: "n1", f: 500, v: 0.15, d: 0.4, r: 0.4, h: 0, t: 0, }, { w: "n0", v: 0.1, t: 0, r: 0.01, f: 440, }],\n    [{ w: "n1", v: 0.3, f: 800, d: 0.2, r: 0.2, h: 0.05, t: 0, }, { w: "square", t: 0, v: 1, d: 0.1, r: 0.1, p: 0.1, f: 220, g: 1, }],\n    [{ w: "sine", f: 1651, v: 0.15, d: 0.2, r: 0.2, h: 0, t: 0, }, { w: "sawtooth", g: 1, t: 1.21, v: 7.2, d: 0.1, r: 11, h: 1, }, { g: 1, w: "n0", v: 3.1, t: 0.152, d: 0.002, r: 0.002, }],\n    null,\n/*55*/[{ w: "n1", v: .3, f: 1200, d: 0.2, r: 0.2, h: 0.05, t: 0, }, { w: "n1", t: 0, v: 1, d: 0.1, r: 0.1, p: 1.2, f: 440, }],\n    null,\n    [{ w: "n1", v: 0.3, f: 555, d: 0.25, r: 0.25, h: 0.05, t: 0, }, { w: "n1", t: 0, v: 1, d: 0.1, r: 0.1, f: 440, a: 0.005, h: 0.02, }],\n    [{ w: "sawtooth", f: 776, v: 0.2, d: 0.3, t: 0, r: 0.3, }, { g: 1, w: "n0", v: 2, t: 0, f: 776, a: 0.005, h: 0.02, d: 0.1, s: 1, r: 0.1, c: 0, }, { g: 11, w: "sine", v: 0.1, t: 0, f: 22, d: 0.3, r: 0.3, b: 0, c: 0, }],\n    [{ w: "n1", f: 440, v: 0.15, d: 0.4, r: 0.4, h: 0, t: 0, }, { w: "n0", v: 0.4, t: 0, r: 0.01, f: 440, }],\n/*60*/  null, null, null, null, null,\n/*65*/  null, null, null, null, null,\n/*70*/  null, null, null, null, null,\n/*75*/  null, null, null, null, null,\n/*80*/[{ w: "sine", f: 1720, v: 0.3, d: 0.02, t: 0, r: 0.02, }, { w: "square", g: 1, t: 0, f: 2876, v: 6, d: 0.2, s: 1, r: 0.2, }],\n    [{ w: "sine", f: 1720, v: 0.3, d: 0.25, t: 0, r: 0.25, }, { w: "square", g: 1, t: 0, f: 2876, v: 6, d: 0.2, s: 1, r: 0.2, }],\n]\n\nvar drums0 = [\n/*35*/[{ w: "triangle", t: 0, f: 110, v: 1, d: 0.05, h: 0.02, p: 0.1, }],\n    [{ w: "triangle", t: 0, f: 150, v: 0.8, d: 0.1, p: 0.1, h: 0.02, r: 0.01, }],\n    [{ w: "n0", f: 392, v: 0.5, d: 0.01, p: 0, t: 0, r: 0.05 }],\n    [{ w: "n0", f: 33, d: 0.05, t: 0, }],\n    [{ w: "n0", f: 100, v: 0.7, d: 0.03, t: 0, r: 0.03, h: 0.02, }],\n/*40*/[{ w: "n0", f: 44, v: 0.7, d: 0.02, p: 0.1, t: 0, h: 0.02, }],\n    [{ w: "triangle", f: 240, v: 0.9, d: 0.1, h: 0.02, p: 0.1, t: 0, }],\n    [{ w: "n0", f: 440, v: 0.2, r: 0.01, t: 0, }],\n    [{ w: "triangle", f: 270, v: 0.9, d: 0.1, h: 0.02, p: 0.1, t: 0, }],\n    [{ w: "n0", f: 440, v: 0.2, d: 0.04, r: 0.04, t: 0, }],\n/*45*/[{ w: "triangle", f: 300, v: 0.9, d: 0.1, h: 0.02, p: 0.1, t: 0, }],\n    [{ w: "n0", f: 440, v: 0.2, d: 0.1, r: 0.1, h: 0.02, t: 0, }],\n    [{ w: "triangle", f: 320, v: 0.9, d: 0.1, h: 0.02, p: 0.1, t: 0, }],\n    [{ w: "triangle", f: 360, v: 0.9, d: 0.1, h: 0.02, p: 0.1, t: 0, }],\n    [{ w: "n0", f: 150, v: 0.2, d: 0.1, r: 0.1, h: 0.05, t: 0, p: 0.1, }],\n/*50*/[{ w: "triangle", f: 400, v: 0.9, d: 0.1, h: 0.02, p: 0.1, t: 0, }],\n    [{ w: "n0", f: 150, v: 0.2, d: 0.1, r: 0.01, h: 0.05, t: 0, p: 0.1 }],\n    [{ w: "n0", f: 150, v: 0.2, d: 0.1, r: 0.01, h: 0.05, t: 0, p: 0.1 }],\n    [{ w: "n0", f: 440, v: 0.3, d: 0.1, p: 0.9, t: 0, r: 0.1, }],\n    [{ w: "n0", f: 200, v: 0.2, d: 0.05, p: 0.9, t: 0, }],\n/*55*/[{ w: "n0", f: 440, v: 0.3, d: 0.12, p: 0.9, t: 0, }],\n    [{ w: "sine", f: 800, v: 0.4, d: 0.06, t: 0, }],\n    [{ w: "n0", f: 150, v: 0.2, d: 0.1, r: 0.01, h: 0.05, t: 0, p: 0.1 }],\n    [{ w: "n0", f: 33, v: 0.3, d: 0.2, p: 0.9, t: 0, }],\n    [{ w: "n0", f: 300, v: 0.3, d: 0.14, p: 0.9, t: 0, }],\n/*60*/[{ w: "sine", f: 200, d: 0.06, t: 0, }],\n    [{ w: "sine", f: 150, d: 0.06, t: 0, }],\n    [{ w: "sine", f: 300, t: 0, }],\n    [{ w: "sine", f: 300, d: 0.06, t: 0, }],\n    [{ w: "sine", f: 250, d: 0.06, t: 0, }],\n/*65*/[{ w: "square", f: 300, v: .3, d: .06, p: .8, t: 0, }],\n    [{ w: "square", f: 260, v: .3, d: .06, p: .8, t: 0, }],\n    [{ w: "sine", f: 850, v: .5, d: .07, t: 0, }],\n    [{ w: "sine", f: 790, v: .5, d: .07, t: 0, }],\n    [{ w: "n0", f: 440, v: 0.3, a: 0.05, t: 0, }],\n/*70*/[{ w: "n0", f: 440, v: 0.3, a: 0.05, t: 0, }],\n    [{ w: "triangle", f: 1800, v: 0.4, p: 0.9, t: 0, h: 0.03, }],\n    [{ w: "triangle", f: 1800, v: 0.3, p: 0.9, t: 0, h: 0.13, }],\n    [{ w: "n0", f: 330, v: 0.3, a: 0.02, t: 0, r: 0.01, }],\n    [{ w: "n0", f: 330, v: 0.3, a: 0.02, t: 0, h: 0.04, r: 0.01, }],\n/*75*/[{ w: "n0", f: 440, v: 0.3, t: 0, }],\n    [{ w: "sine", f: 800, t: 0, }],\n    [{ w: "sine", f: 700, t: 0, }],\n    [{ w: "n0", f: 330, v: 0.3, t: 0, }],\n    [{ w: "n0", f: 330, v: 0.3, t: 0, h: 0.1, r: 0.01, p: 0.7, }],\n/*80*/[{ w: "sine", t: 0, f: 1200, v: 0.3, r: 0.01, }],\n    [{ w: "sine", t: 0, f: 1200, v: 0.3, d: 0.2, r: 0.2, }],\n]\n\n//////////////////\n// WEBPACK FOOTER\n// ./tinySynthInstruments.js\n// module id = 7\n// module chunks = 0\n\n//# sourceURL=webpack:///./tinySynthInstruments.js?')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar defs = __webpack_require__(0)\n\nvar Signal = defs.Signal\nvar Sweep = defs.Sweep\nvar Envelope = defs.Envelope\n\nmodule.exports = function programConverter(tsProg) {\n\n    // tinysynth defaults\n    var defp = { g: 0, w: \"sine\", t: 1, f: 0, v: 0.5, a: 0, h: 0.01, d: 0.01, s: 0, r: 0.05, p: 1, q: 1, k: 0 };\n\n    return tsProg.map(pn => {\n        var sig = {}\n        for (var s in defp) sig[s] = defp[s]\n        for (var s2 in pn) sig[s2] = pn[s2]\n\n        // remove clicks :/\n        if (sig.a < 0.003) sig.a = 0.003\n\n        // always a sweep for frequency, always an envelope for gain\n        var freq = new Sweep(sig.t, sig.f, sig.p, sig.q)\n        var gain = new Envelope(sig.v, sig.a, sig.h, sig.d, sig.s, sig.r, sig.k)\n        // target based on g property\n        var target = ''\n        if (sig.g > 10) target = (sig.g - 11) + '.gain'\n        else if (sig.g > 0) target = (sig.g - 1) + '.freq'\n        // finally one signal per array input\n        return new Signal(sig.w, target, 0, freq, gain)\n    })\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./programConverter.js\n// module id = 8\n// module chunks = 0\n\n//# sourceURL=webpack:///./programConverter.js?")},function(module,exports,__webpack_require__){"use strict";eval("\n\n\n\nvar rand = (a, b) => a + (b - a) * Math.random()\nvar select = function () { return arguments[Math.floor(rand(0, arguments.length))] }\n\n\n\n\n\nmodule.exports = function Presets() {\n\n    this.jump = function () {\n        return [{\n            type: select('square', 'triangle'),\n            freq: {\n                t: 0.5,\n                p: 2,\n                q: rand(0.25, 0.5),\n                j: [select(0.2, 0.25, 0.3333)],\n                jt: [rand(0.05, 0.15)],\n            },\n            gain: { v: 0.5, a: 0.01, d: 0.7, s: 0, r: 0.2 }\n        }]\n    }\n\n\n    this.coin = function () {\n        var j = [select(0.2, 0.25, 0.3333)]\n        var jt = [rand(0.05, 0.1)]\n        if (!rand(0, 3)) {\n            j.push(select(0.2, 0.25, 0.3333))\n            jt.push(rand(0.15, 0.2))\n        }\n        return [{\n            type: select('square', 'w9999'),\n            freq: {\n                j: j,\n                jt: jt\n            },\n            gain: { v: 0.5, a: 0.01, d: 0.7, s: 0, r: 0.2 }\n        }]\n    }\n\n\n\n    this.laser = function () {\n        var bend = select(0, 1)\n        return [{\n            type: select('triangle'),\n            freq: {\n                p: bend ? select(0.5, 0.75, 0.8) : 1,\n                q: bend ? rand(0.25, 0.5) : 1,\n            },\n            gain: { v: 0.5, a: 0.01, d: 0.7, s: 0, r: 0.2 }\n        }, {\n            target: '0.freq',\n            freq: {\n                t: 0,\n                f: rand(10, 30),\n                p: rand(1, 2),\n                q: 0.5,\n            },\n            gain: { t: 0.2 },\n        }]\n    }\n\n\n\n\n    this.explosion = function () {\n        return [{\n            type: 'np',\n            gain: { v: 0.5, a: 0.01, d: 0.7, s: 0, r: 0.2 }\n        }, {\n            target: '0.gain',\n            freq: {\n                t: 0,\n                f: rand(10, 30),\n                p: rand(1, 4),\n                q: rand(0.2, 0.6),\n            },\n            gain: { v: 0.3, a: 0, h: 0, d: 0.3, s: 0, r: 0.2 }\n        }, {\n            type: 'lowpass',\n            freq: {\n                t: 2,\n                p: 0.25,\n                q: rand(0.3, 0.5),\n            },\n        }]\n    }\n\n\n\n\n\n}\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./presets.js\n// module id = 9\n// module chunks = 0\n\n//# sourceURL=webpack:///./presets.js?")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar Params = __webpack_require__(11)\nvar Sources = __webpack_require__(12)\nvar Effects = __webpack_require__(13)\nvar defs = __webpack_require__(0)\n\nmodule.exports = Player\n\n\n\nfunction Player(ctx, dest) {\n\n\n\n    /*\n     * \n     *      API\n     * \n    */\n\n    this.maxVoices = 32\n\n\n\n    this.play = function (program, freq, vel, time, releaseTime) {\n        time = time || ctx.currentTime\n        enforceMaxVoices(this.maxVoices - 1)\n        var note = addNote(program, freq, vel, time, dest)\n        if (releaseTime) releaseNote(note, releaseTime)\n        return note.id\n    }\n\n\n    this.bend = function (noteID, freq, timeConst, time) {\n        time = time || ctx.currentTime\n        var note = getNoteByID(noteID)\n        if (note) bend(note, freq, timeConst, time)\n    }\n\n\n    this.release = function (noteID, time) {\n        time = time || ctx.currentTime\n        var note = getNoteByID(noteID)\n        if (note) releaseNote(note, time)\n    }\n\n\n    this.releaseAll = function (time) {\n        time = time || ctx.currentTime\n        for (var i = 0; i < currentNotes; i++) {\n            releaseNote(currentNotes[i])\n        }\n    }\n\n\n\n\n\n\n    /*\n     * \n     *      note management and lifecycle\n     * \n    */\n\n\n\n    var currentNotes = []\n\n\n    function enforceMaxVoices(limit) {\n        if (currentNotes.length <= limit) return\n        // dispose anything disposeable\n        pruneEndedNotes()\n        // if still too many, just dispose stuff, oldest first\n        while (currentNotes.length > limit) {\n            disposeNote(currentNotes.shift())\n        }\n    }\n\n    function addNote(program, freq, vel, time, dest) {\n        var note = makeNote(program, freq, vel, time, dest)\n        currentNotes.push(note)\n        return note\n    }\n\n\n    function getNoteByID(id) {\n        for (var i = 0; i < currentNotes.length; i++) {\n            if (currentNotes[i].id === id) return currentNotes[i]\n        }\n        return null\n    }\n\n\n\n\n    // cleanup function\n    function pruneEndedNotes() {\n        var t = ctx.currentTime\n        for (var i = 0; i < currentNotes.length; i++) {\n            var note = currentNotes[i]\n            if (note.endTime > 0 && t >= note.endTime) {\n                disposeNote(note)\n                currentNotes.splice(i, 1)\n                i--\n            }\n        }\n    }\n    setInterval(pruneEndedNotes, 200)\n\n\n\n\n\n\n    /*\n     * \n     *      NOTE PLAYING IMPLEMENTATION\n     * \n    */\n\n\n    // note data struct definition\n\n    var _noteID = 0\n\n    function Note(time) {\n        _noteID = (_noteID + 1) & 0xFFFF\n        this.id = _noteID\n        this.time = +time\n        this.endTime = +0\n        // audio nodes\n        this.nodes = []\n        // base frequency params (for bending)\n        this.fqParams = []\n        // envelope nodes and values\n        this.envParams = []\n        this.envAttacks = []\n        this.envPeaks = []\n        this.envReleases = []\n    }\n\n\n\n\n\n    // note creation\n\n    var params = new Params()\n    var sources = new Sources(ctx)\n    var effects = new Effects(ctx)\n\n\n\n\n    function makeNote(program, freq, vel, baseTime, dest) {\n        var note = new Note(baseTime)\n\n        var signalFreqs = []\n        var baseNodes = []\n        var gainNodes = []\n        var destChain = []\n        var lineOuts = []\n        var fqParams = []\n\n        for (var i = 0; i < program.length; i++) {\n            var signal = defs.conformSignal(program[i])\n            var time = baseTime + signal.delay\n\n            // this is sugar to make the UI work easier\n            if (signal.type === 'none') continue\n\n            // create base node - either a source or an effect\n            var type = signal.type\n            var isSource = sources.isSource(type)\n            var nodeCreator = isSource ? sources : effects\n            var node = nodeCreator.createNode(type)\n            if (node.start) node.start(time)\n            note.nodes.push(node)\n            baseNodes[i] = node\n            var currOutput = node\n\n            // parse target\n            var target = -1\n            var targetProp = ''\n            if (signal.target) {\n                target = parseInt(signal.target)\n                var dot = signal.target.indexOf('.')\n                if (dot > -1) targetProp = signal.target.substr(dot + 1)\n            }\n\n            // make a gain node if the source needs one, and connect it up\n            var gainParam = node.gain\n            if (!gainParam) {\n                var gainNode = ctx.createGain()\n                note.nodes.push(gainNode)\n                node.connect(gainNode)\n                currOutput = gainNode\n                gainParam = gainNode.gain\n                gainNodes[i] = gainNode\n            }\n\n            // apply gain program unless source node ignores gain\n            if (nodeCreator.usesGain(node)) {\n                var gBase = (target < 0) ? vel * vel : 1\n                if (target >= 0 && targetProp === 'freq') {\n                    gBase = signalFreqs[target]\n                    if (baseNodes[target].playbackRate) {\n                        gainParam = new ParamWrapper(gainParam, 1 / 440, 0, 1)\n                    }\n                }\n                var res = params.apply(note, gainParam, time, gBase, signal.gain, freq)\n            }\n\n            // apply frequency program, defaulting to an empty sweep\n            var fqBase = (target < 0) ? freq : signalFreqs[target]\n            var fqParam = (node.playbackRate) ?\n                new ParamWrapper(node.playbackRate, 1 / 440, 0, 1) :\n                node.frequency\n            var fqResult = params.apply(note, fqParam, time, fqBase, signal.freq, freq)\n            //   ..and remember base/peak value in signalFreqs\n            signalFreqs[i] = fqResult\n            fqParams[i] = fqParam\n\n            // remember fq param for bending\n            if (signal.freq.t) {\n                var mult = (fqBase / freq) * signal.freq.t\n                var wrapped = new ParamWrapper(fqParam, mult, signal.freq.f || 0, signal.freq.p)\n                note.fqParams.push(wrapped)\n            }\n\n            // effects can have a Q value and program\n            if (node.Q && signal.Q && nodeCreator.usesQ(node)) {\n                params.apply(note, node.Q, time, 1, signal.Q, freq)\n            }\n\n            // nodes and params ready, prepare connection chains\n\n            // if node is an effect, put it somewhere in the output chain\n            if (!isSource) {\n                if (target < 0 || !lineOuts[target]) {\n                    destChain.push(node)\n                } else {\n                    lineOuts[target].connect(node)\n                    lineOuts[target] = node\n                }\n            } else {\n                // src is an oscillator/buffer:\n                if (target < 0) {\n                    // signal is start of a lineout chain\n                    lineOuts[i] = currOutput\n\n                } else {\n                    // signal drives a property somewhere\n                    var paramTgt\n                    if (targetProp === 'freq') {\n                        paramTgt = fqParams[target]\n                    } else if (targetProp === 'Q') {\n                        paramTgt = baseNodes[target].Q\n                    } else if (targetProp === 'gain') {\n                        paramTgt = gainNodes[target].gain\n                    } else {\n                        console.warn('NYI -- unknown target prop', targetProp)\n                    }\n                    if (paramTgt) {\n                        var pout = paramTgt.wrappedParam || paramTgt\n                        currOutput.connect(pout)\n                    }\n                }\n            }\n            // end of per-signal handling\n        }\n\n        // process stored nodes into output chain\n        destChain.push(dest)\n        var currDest = destChain[0]\n        for (var j = 0; j < lineOuts.length; j++) {\n            if (lineOuts[j]) {\n                lineOuts[j].connect(currDest)\n            }\n        }\n        for (var k = 1; k < destChain.length; k++) {\n            currDest.connect(destChain[k])\n            currDest = destChain[k]\n        }\n\n        // sanity\n        signalFreqs.length = 0\n        baseNodes.length = 0\n        gainNodes.length = 0\n        destChain.length = 0\n        lineOuts.length = 0\n        fqParams.length = 0\n\n        return note\n    }\n\n\n    function isSet(o) {\n        if (typeof o === 'number') return true\n        return !!(o && Object.keys(o).length)\n    }\n\n\n\n\n    /*\n     * \n     *      BEND\n     *  hacking...\n     * \n    */\n\n    function bend(note, freq, constant, time) {\n        if (note.endTime > 0) return\n        if (time < note.time) time = note.time\n        note.fqParams.forEach(param => {\n            param.cancelScheduledValues(time)\n            param.setTargetAtTime(freq, time, constant)\n        })\n    }\n\n\n    /*\n     * \n     *      RELEASE\n     *  set release envelopes if there are any, etc.\n     * \n    */\n\n    function releaseNote(note, time) {\n        if (note.endTime > 0) return\n        if (time < note.time) time = note.time\n\n        var maxRel = 0\n        note.envParams.forEach((param, i) => {\n            param.cancelScheduledValues(time)\n\n            // set current value if release happens during attack ramp\n            var noteStart = note.time\n            var peakTime = noteStart + note.envAttacks[i]\n            if (time <= peakTime) {\n                var releaseVal = note.envPeaks[i]\n                if (time < peakTime) releaseVal *= (time - noteStart) / (peakTime - noteStart)\n                param.setValueAtTime(releaseVal, time)\n            }\n\n            // apply release decay\n            var relConst = note.envReleases[i]\n            param.setTargetAtTime(0, time, relConst)\n            var relTime = time + relConst * 4 // ish\n            if (relTime > maxRel) maxRel = relTime\n        })\n\n        note.endTime = Math.max(time, maxRel)\n    }\n\n\n\n    /*\n     * \n     *      DISPOSAL\n     * \n    */\n\n    function disposeNote(note) {\n        var time = ctx.currentTime\n        for (var i = 0; i < note.nodes.length; i++) {\n            var node = note.nodes[i]\n            node.disconnect()\n            if (node.gain) node.gain.cancelScheduledValues(time)\n            if (node.frequency) node.frequency.cancelScheduledValues(time)\n            if (node.playbackRate) node.playbackRate.cancelScheduledValues(time)\n            if (node.Q) node.Q.cancelScheduledValues(time)\n            if (node.stop) node.stop()\n        }\n        for (var s in note) if (note[s].length) note[s].length = 0\n    }\n\n\n}\n\n\n\n// Wrapper to bake a multiplier value into an AudioParam\nfunction ParamWrapper(param, mult, add, bend) {\n    this.wrappedParam = param\n    if (isNaN(bend)) bend = 1\n    var calc = val => (val * mult + add) * bend\n    this.setValueAtTime = (v, t) => param.setValueAtTime(calc(v), t)\n    this.setTargetAtTime = (v, t, c) => param.setTargetAtTime(calc(v), t, c)\n    this.linearRampToValueAtTime = (v, t) => param.linearRampToValueAtTime(calc(v), t)\n    this.cancelScheduledValues = (t) => param.cancelScheduledValues(t)\n}\n\n\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../src/notePlayer.js\n// module id = 10\n// module chunks = 0\n\n//# sourceURL=webpack:///../src/notePlayer.js?")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar defs = __webpack_require__(0)\n\nmodule.exports = Params\n\n\n/*\n* \n*      general handler to apply a program object to an AudioParam\n* \n*/\n\n\nfunction Params() {\n\n\n\n    this.apply = function (note, param, time, baseVal, program, inputFreq) {\n\n        // apply input key tracking before subsequent param programs\n        if (program.k) {\n            baseVal *= Math.pow(inputFreq / 261.625, program.k)\n            // equivalent to: base *= Math.pow(2, (midiNote - 60) / 12 * k)\n        }\n\n        // apply sweep or envelope - sweep always has one of [t, f, p, j] nonzero\n        if (program.t || program.f || program.p || program.j) {\n            return applyParamSweep(param, time, baseVal, program)\n        } else {\n            return applyParamEnvelope(note, param, time, baseVal, program)\n        }\n\n    }\n\n\n\n\n    // apply a sweep program\n    function applyParamSweep(param, time, value, prog) {\n        value = clamp(value * prog.t + prog.f)\n        param.setValueAtTime(value, time)\n\n        var bend = (prog.p !== 1)\n        var target = clamp(value * prog.p)\n        if (bend) param.setTargetAtTime(target, time, prog.q)\n\n        // console.log('   param sweep:', value, bend ? ' --\x3e ' + target : '')\n\n        if (prog.j && prog.jt) {\n            var jarr = prog.j\n            var jtarr = prog.jt\n            if (typeof jarr === 'string') jarr = jarr.split(',').map(s => parseFloat(s))\n            if (typeof jtarr === 'string') jtarr = jtarr.split(',').map(s => parseFloat(s))\n            var v = value\n            var t = 0\n            for (var i = 0; i < jarr.length; i++) {\n                var j = jarr[i]\n                var jt = jtarr[i]\n                var old = v\n                if (j && jt) {\n                    if (bend) {\n                        v = evalTargetCurve(v, target, jt, prog.q)\n                        old = v\n                        v += clamp(j * (target - v))\n                        t += jt\n                        param.setValueAtTime(v, time + t)\n                        param.setTargetAtTime(target, time + t, prog.q)\n                    } else {\n                        v += clamp(v * j)\n                        t += jt\n                        param.setValueAtTime(v, time + t)\n                    }\n                    // console.log('   param jump:', old, 'to', v, bend ? ' --\x3e ' + target : '')\n                }\n            }\n        }\n        return value\n    }\n\n    // evaluate value of param during a setTarget curve\n    // https://webaudio.github.io/web-audio-api/#widl-AudioParam-setTargetAtTime-AudioParam-float-target-double-startTime-float-timeConstant\n    function evalTargetCurve(v0, vTarget, dt, timeConst) {\n        return vTarget + (v0 - vTarget) * Math.exp(-dt / timeConst)\n    }\n\n\n\n\n    // apply an envelope program\n    function applyParamEnvelope(note, param, time, peak, prog) {\n        peak = clamp(peak * prog.v)\n\n        if (prog.a > 0) {\n            param.setValueAtTime(0, time)\n            param.linearRampToValueAtTime(peak, time + prog.a)\n        } else {\n            param.setValueAtTime(peak, time)\n        }\n        if (prog.s !== 1) {\n            var decayTime = time + prog.a + prog.h\n            var sustain = clamp(peak * prog.s)\n            param.setTargetAtTime(sustain, decayTime, prog.d)\n        }\n        // store values in the note object so that stuff can be done at release time\n        note.envParams.push(param)\n        note.envAttacks.push(prog.a || 0)\n        note.envPeaks.push(peak)\n        note.envReleases.push(prog.r || 0)\n\n        // console.log('   param env:  0 -> ', peak, ' -> ' , peak * prog.s, ' -> 0')\n\n        return peak\n    }\n\n\n\n\n    function clamp(val) {\n        return (val > 22050) ? 22050 : val\n    }\n\n}\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../src/nodes/params.js\n// module id = 11\n// module chunks = 0\n\n//# sourceURL=webpack:///../src/nodes/params.js?")},function(module,exports,__webpack_require__){"use strict";eval("\n\n\nmodule.exports = Sources\n\n\n/*\n * \n *      general handler to create an audio source (oscillator / buffer)\n *                  OR a biquad filter\n * \n*/\n\n\nfunction Sources(ctx) {\n\n    var oscillatorTypes = {\n        si: 'sine',\n        sq: 'square',\n        sa: 'sawtooth',\n        tr: 'triangle',\n    }\n\n\n\n    // info accessors\n\n    this.isSource = function (type) {\n        var ty = type.substr(0, 2)\n        if (oscillatorTypes[ty]) return true\n        var t = type[0]\n        if (t === 'n' || t === 'w') return true\n        return false\n    }\n\n    this.usesGain = function (node) { return true }\n    this.usesQ = function (node) { return false }\n\n\n\n    // source creation\n\n    this.createNode = function (type) {\n        var t = type[0]\n        if (t === 'n') return createNoise(type)\n        if (t === 'w') return createWave(type)\n\n        var name = oscillatorTypes[type.substr(0, 2)]\n        return createOscillator(name || 'sine')\n    }\n\n\n\n\n    /*\n     * \n     *      SOURCES\n     * \n    */\n\n\n    function createOscillator(type) {\n        var osc = ctx.createOscillator()\n        osc.type = type\n        return osc\n    }\n\n    function createWave(type) {\n        var osc = ctx.createOscillator()\n        osc.setPeriodicWave(getPeriodicWave(type))\n        return osc\n    }\n\n    function getPeriodicWave(name) {\n        if (!periodicWaves[name]) {\n            var imag = new Float32Array(name.length)\n            var real = new Float32Array(name.length)\n            for (var i = 1; i < name.length; ++i) imag[i] = parseFloat(name[i])\n            periodicWaves[name] = ctx.createPeriodicWave(real, imag)\n        }\n        return periodicWaves[name]\n    }\n    var periodicWaves = {}\n\n\n\n\n\n\n    /*\n     * \n     *      NOISE\n     * \n    */\n\n    function createNoise(type) {\n        var src = ctx.createBufferSource()\n        src.buffer = noiseBuffers[type] || noiseBuffers.n0\n        src.loop = true\n        return src\n    }\n\n    var noiseBuffers = {}\n    var blen = (ctx.sampleRate / 2) | 0\n\n    // n0 - white noise\n    noiseBuffers.n0 = (function () {\n        var n0 = ctx.createBuffer(1, blen, ctx.sampleRate)\n        var dn = n0.getChannelData(0)\n        for (var i = 0; i < blen; i++) {\n            dn[i] = 2 * Math.random() - 1\n        }\n        return n0\n    })()\n\n\n    // n1 - random harmonics of 440hz\n    noiseBuffers.n1 = (function () {\n        var n1 = ctx.createBuffer(1, blen, ctx.sampleRate)\n        var dr = n1.getChannelData(0)\n\n        for (var j = 0; j < 64; j++) {\n            var r1 = (Math.random() * 10 + 1) * 440 * Math.PI * 2\n            var r2 = (Math.random() * 10 + 1) * 440 * Math.PI * 2\n            var p1 = Math.random() * 2 * Math.PI\n            var p2 = Math.random() * 2 * Math.PI\n            for (var i = 0; i < blen; i++) {\n                var a = Math.sin(p1 + r1 * (i / blen))\n                var b = Math.sin(p2 + r2 * (i / blen))\n                dr[i] += a * b / 8\n            }\n        }\n        return n1\n    })()\n\n\n    // np - pink noise\n    // http://www.musicdsp.org/files/pink.txt\n    noiseBuffers.np = (function () {\n        var np = ctx.createBuffer(1, blen, ctx.sampleRate)\n        var dn = np.getChannelData(0)\n        var b0 = 0, b1 = 0, b2 = 0\n\n        for (var i = 0; i < blen; i++) {\n            var white = 2 * Math.random() - 1\n            b0 = 0.99765 * b0 + white * 0.0990460\n            b1 = 0.96300 * b1 + white * 0.2965164\n            b2 = 0.57000 * b2 + white * 1.0526913\n            dn[i] = b0 + b1 + b2 + white * 0.1848\n        }\n        return np\n    })()\n\n\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../src/nodes/sources.js\n// module id = 12\n// module chunks = 0\n\n//# sourceURL=webpack:///../src/nodes/sources.js?")},function(module,exports,__webpack_require__){"use strict";eval("\n\n\nmodule.exports = Effects\n\n\n/*\n * \n *      general handler to create an audio source (oscillator / buffer)\n *                  OR a biquad filter\n * \n*/\n\n\nfunction Effects(ctx) {\n\n    var filterParams = {\n        lowpass: 'fq',\n        highpass: 'fq',\n        bandpass: 'fq',\n        lowshelf: 'fg',\n        highshelf: 'fg',\n        peaking: 'fqg',\n        notch: 'fq',\n        allpass: 'fq'\n    }\n\n\n    // info accessors\n\n    this.usesGain = function (node) {\n        var str = filterParams[node.type] || ''\n        return str.includes('g')\n    }\n    \n    this.usesQ = function (node) {\n        var str = filterParams[node.type] || ''\n        return str.includes('q')\n    }\n\n\n    // effect creation\n\n    this.createNode = function(type) {\n        if (!filterParams[type]) type = 'lowpass'\n        return createFilter(type)\n    }\n\n\n\n\n    \n\n\n    /*\n     * \n     *      FILTERS\n     * \n    */\n\n\n    function createFilter(type) {\n        var filter = ctx.createBiquadFilter()\n        filter.type = type\n        return filter\n    }\n\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../src/nodes/effects.js\n// module id = 13\n// module chunks = 0\n\n//# sourceURL=webpack:///../src/nodes/effects.js?")}]);